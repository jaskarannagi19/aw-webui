{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/mixins/asyncErrorCaptured.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/mixins/asyncErrorCaptured.js","mtime":1622212604093},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2phc2thcmFuL2NvZGUvamFza2FyYW4vYWN0aXZpdHl3YXRjaC9hdy1zZXJ2ZXIvYXctd2VidWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwoKZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IsIHZtLCBpbmZvKSB7CiAgdmFyIGN1ciA9IHZtOwoKICB3aGlsZSAoY3VyID0gY3VyLiRwYXJlbnQpIHsKICAgIHZhciBob29rcyA9IGN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkIHx8IFtdOwoKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihob29rcyksCiAgICAgICAgX3N0ZXA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgaG9vayA9IF9zdGVwLnZhbHVlOwogICAgICAgIGlmIChob29rLmNhbGwoY3VyLCBlcnJvciwgdm0sIGluZm8pID09PSBmYWxzZSkgYnJlYWs7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICB9Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHZhciB0aGF0ID0gdGhpczsKICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzIHx8IHt9OwoKICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGtleSkgewogICAgICB2YXIgb3JpZ2luYWwgPSBtZXRob2RzW2tleV07CgogICAgICBtZXRob2RzW2tleV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTsKCiAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgcmVzdWx0WyJjYXRjaCJdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHJldHVybiByZXN1bHRbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgdGhhdCwga2V5KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGF0LCBrZXkpOwogICAgICAgIH0KICAgICAgfTsKICAgIH07CgogICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHsKICAgICAgX2xvb3Aoa2V5KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/mixins/asyncErrorCaptured.js"],"names":["handleError","error","vm","info","cur","$parent","hooks","$options","errorCaptured","hook","call","beforeCreate","that","methods","key","original","args","result","apply","then","err","e"],"mappings":";;AAOA,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,EAA5B,EAAgCC,IAAhC,EAAsC;AACpC,MAAIC,GAAG,GAAGF,EAAV;;AACA,SAAQE,GAAG,GAAGA,GAAG,CAACC,OAAlB,EAA4B;AAC1B,QAAMC,KAAK,GAAGF,GAAG,CAACG,QAAJ,CAAaC,aAAb,IAA8B,EAA5C;;AAD0B,+CAEPF,KAFO;AAAA;;AAAA;AAE1B;AAAA,YAAWG,IAAX;AAA0B,YAAIA,IAAI,CAACC,IAAL,CAAUN,GAAV,EAAeH,KAAf,EAAsBC,EAAtB,EAA0BC,IAA1B,MAAoC,KAAxC,EAA+C;AAAzE;AAF0B;AAAA;AAAA;AAAA;AAAA;AAG3B;AACF;;AAED,eAAe;AACbQ,EAAAA,YAAY,EAAE,wBAAY;AACxB,QAAMC,IAAI,GAAG,IAAb;AACA,QAAMC,OAAO,GAAG,KAAKN,QAAL,CAAcM,OAAd,IAAyB,EAAzC;;AAFwB,+BAGbC,GAHa;AAItB,UAAMC,QAAQ,GAAGF,OAAO,CAACC,GAAD,CAAxB;;AACAD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAe,YAAmB;AAChC,YAAI;AAAA,4CADsBE,IACtB;AADsBA,YAAAA,IACtB;AAAA;;AACF,cAAMC,MAAM,GAAGF,QAAQ,CAACG,KAAT,CAAe,IAAf,EAAqBF,IAArB,CAAf;;AAEA,cAAIC,MAAM,IAAI,OAAOA,MAAM,CAACE,IAAd,KAAuB,UAAjC,IAA+C,OAAOF,MAAM,SAAb,KAAwB,UAA3E,EAAuF;AAErF,mBAAOA,MAAM,SAAN,CAAa,UAAUG,GAAV,EAAe;AACjCpB,cAAAA,WAAW,CAACoB,GAAD,EAAMR,IAAN,EAAYE,GAAZ,CAAX;AACD,aAFM,CAAP;AAGD,WALD,MAKO,OAAOG,MAAP;AACR,SATD,CASE,OAAOI,CAAP,EAAU;AACVrB,UAAAA,WAAW,CAACqB,CAAD,EAAIT,IAAJ,EAAUE,GAAV,CAAX;AACD;AACF,OAbD;AALsB;;AAGxB,SAAK,IAAMA,GAAX,IAAkBD,OAAlB,EAA2B;AAAA,YAAhBC,GAAgB;AAgB1B;AACF;AArBY,CAAf","sourcesContent":["// This mixin fixes following issue: errorHandler does not work with async component methods.\n// Fixing that issue is required for the ErrorBoundary component to work correctly.\n//\n// First I tried https://github.com/vuejs/vue/issues/7653\n// That didn't work, so I then tried: https://markeev.com/posts/vue-error-handling/\n// Which seems to work! (as long as you mark all functions as async and use await properly)\n\nfunction handleError(error, vm, info) {\n  let cur = vm;\n  while ((cur = cur.$parent)) {\n    const hooks = cur.$options.errorCaptured || [];\n    for (const hook of hooks) if (hook.call(cur, error, vm, info) === false) break;\n  }\n}\n\nexport default {\n  beforeCreate: function () {\n    const that = this;\n    const methods = this.$options.methods || {};\n    for (const key in methods) {\n      const original = methods[key];\n      methods[key] = function (...args) {\n        try {\n          const result = original.apply(this, args);\n          // let's analyse what is returned from the method\n          if (result && typeof result.then === 'function' && typeof result.catch === 'function') {\n            // this looks like a Promise. let's handle it's errors:\n            return result.catch(function (err) {\n              handleError(err, that, key);\n            });\n          } else return result;\n        } catch (e) {\n          handleError(e, that, key);\n        }\n      };\n    }\n  },\n};\n"]}]}