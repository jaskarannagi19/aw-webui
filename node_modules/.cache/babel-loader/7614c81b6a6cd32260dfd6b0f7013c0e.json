{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/activity/Activity.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/activity/Activity.vue","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvaG9tZS9qYXNrYXJhbi9jb2RlL2phc2thcmFuL2FjdGl2aXR5d2F0Y2gvYXctc2VydmVyLXJ1c3QvYXctd2VidWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9qYXNrYXJhbi9jb2RlL2phc2thcmFuL2FjdGl2aXR5d2F0Y2gvYXctc2VydmVyLXJ1c3QvYXctd2VidWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2ZpbHRlciBmcm9tICJsb2Rhc2gvZmlsdGVyIjsKaW1wb3J0IF9pc0VxdWFsIGZyb20gImxvZGFzaC9pc0VxdWFsIjsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyBnZXRfZGF5X3N0YXJ0X3dpdGhfb2Zmc2V0LCBnZXRfdG9kYXkgfSBmcm9tICd+L3V0aWwvdGltZSc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvYXJyb3ctbGVmdCc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvYXJyb3ctcmlnaHQnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3N5bmMnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3BsdXMnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL2VkaXQnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3RpbWVzJzsKaW1wb3J0ICd2dWUtYXdlc29tZS9pY29ucy9zYXZlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBY3Rpdml0eScsCiAgcHJvcHM6IHsKICAgIGhvc3Q6IFN0cmluZywKICAgIGRhdGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgcGVyaW9kTGVuZ3RoOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgImRlZmF1bHQiOiAnZGF5JwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvZGF5OiBnZXRfdG9kYXkoKSwKICAgICAgZmlsdGVyQ2F0ZWdvcnk6IG51bGwsCiAgICAgIGluY2x1ZGVBdWRpYmxlOiB0cnVlLAogICAgICBmaWx0ZXJBRks6IHRydWUsCiAgICAgIG5ld192aWV3OiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2aWV3czogZnVuY3Rpb24gdmlld3MoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS52aWV3cy52aWV3czsKICAgIH0sCiAgICBjdXJyZW50VmlldzogZnVuY3Rpb24gY3VycmVudFZpZXcoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy52aWV3cy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYuaWQgPT0gX3RoaXMuJHJvdXRlLnBhcmFtcy52aWV3X2lkOwogICAgICB9KSB8fCB0aGlzLnZpZXdzWzBdOwogICAgfSwKICAgIF9kYXRlOiBmdW5jdGlvbiBfZGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0ZSB8fCBnZXRfdG9kYXkoKTsKICAgIH0sCiAgICBzdWJ2aWV3OiBmdW5jdGlvbiBzdWJ2aWV3KCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubWV0YS5zdWJ2aWV3OwogICAgfSwKICAgIGNhdGVnb3JpZXM6IGZ1bmN0aW9uIGNhdGVnb3JpZXMoKSB7CiAgICAgIHZhciBjYXRzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2F0ZWdvcmllcy9hbGxfY2F0ZWdvcmllcyddOwogICAgICB2YXIgZW50cmllcyA9IGNhdHMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRleHQ6IGMuam9pbignID4gJyksCiAgICAgICAgICB2YWx1ZTogYwogICAgICAgIH07CiAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS50ZXh0ID4gYi50ZXh0OwogICAgICB9KTsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgdGV4dDogJ0FsbCcsCiAgICAgICAgdmFsdWU6IG51bGwKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdVbmNhdGVnb3JpemVkJywKICAgICAgICB2YWx1ZTogWydVbmNhdGVnb3JpemVkJ10KICAgICAgfV0uY29uY2F0KGVudHJpZXMpOwogICAgfSwKICAgIGZpbHRlckNhdGVnb3JpZXM6IGZ1bmN0aW9uIGZpbHRlckNhdGVnb3JpZXMoKSB7CiAgICAgIGlmICh0aGlzLmZpbHRlckNhdGVnb3J5KSB7CiAgICAgICAgdmFyIGNhdHMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjYXRlZ29yaWVzL2FsbF9jYXRlZ29yaWVzJ107CgogICAgICAgIHZhciBpc0NoaWxkID0gZnVuY3Rpb24gaXNDaGlsZChwKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgcmV0dXJuIGMubGVuZ3RoID4gcC5sZW5ndGggJiYgX2lzRXF1YWwocCwgYy5zbGljZSgwLCBwLmxlbmd0aCkpOwogICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICB2YXIgY2hpbGRyZW4gPSBfZmlsdGVyKGNhdHMsIGlzQ2hpbGQodGhpcy5maWx0ZXJDYXRlZ29yeSkpOwoKICAgICAgICByZXR1cm4gW3RoaXMuZmlsdGVyQ2F0ZWdvcnldLmNvbmNhdChjaGlsZHJlbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBsaW5rX3ByZWZpeDogZnVuY3Rpb24gbGlua19wcmVmaXgoKSB7CiAgICAgIHJldHVybiAiL2FjdGl2aXR5LyIuY29uY2F0KHRoaXMuaG9zdCwgIi8iKS5jb25jYXQodGhpcy5wZXJpb2RMZW5ndGgpOwogICAgfSwKICAgIHBlcmlvZHVzYWdlOiBmdW5jdGlvbiBwZXJpb2R1c2FnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2FjdGl2aXR5L2dldEFjdGl2ZUhpc3RvcnlBcm91bmRUaW1lcGVyaW9kJ10odGhpcy50aW1lcGVyaW9kKTsKICAgIH0sCiAgICB0aW1lcGVyaW9kOiBmdW5jdGlvbiB0aW1lcGVyaW9kKCkgewogICAgICByZXR1cm4gewogICAgICAgIHN0YXJ0OiBnZXRfZGF5X3N0YXJ0X3dpdGhfb2Zmc2V0KHRoaXMuX2RhdGUpLAogICAgICAgIGxlbmd0aDogWzEsIHRoaXMucGVyaW9kTGVuZ3RoXQogICAgICB9OwogICAgfSwKICAgIGRhdGVmb3JtYXQ6IGZ1bmN0aW9uIGRhdGVmb3JtYXQoKSB7CiAgICAgIGlmICh0aGlzLnBlcmlvZExlbmd0aCA9PT0gJ2RheScpIHsKICAgICAgICByZXR1cm4gJ1lZWVktTU0tREQnOwogICAgICB9IGVsc2UgaWYgKHRoaXMucGVyaW9kTGVuZ3RoID09PSAnd2VlaycpIHsKICAgICAgICByZXR1cm4gJ1lZWVlbIFddV1cnOwogICAgICB9IGVsc2UgaWYgKHRoaXMucGVyaW9kTGVuZ3RoID09PSAnbW9udGgnKSB7CiAgICAgICAgcmV0dXJuICdZWVlZLU1NJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLnBlcmlvZExlbmd0aCA9PT0gJ3llYXInKSB7CiAgICAgICAgcmV0dXJuICdZWVlZJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ1lZWVktTU0tREQnOwogICAgICB9CiAgICB9LAogICAgcGVyaW9kUmVhZGFibGU6IGZ1bmN0aW9uIHBlcmlvZFJlYWRhYmxlKCkgewogICAgICByZXR1cm4gbW9tZW50KHRoaXMudGltZXBlcmlvZC5zdGFydCkuZm9ybWF0KHRoaXMuZGF0ZWZvcm1hdCk7CiAgICB9LAogICAgcGVyaW9kTGVuZ3RoTW9tZW50OiBmdW5jdGlvbiBwZXJpb2RMZW5ndGhNb21lbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBlcmlvZExlbmd0aENvbnZlcnRNb21lbnQodGhpcy5wZXJpb2RMZW5ndGgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGhvc3Q6IGZ1bmN0aW9uIGhvc3QoKSB7CiAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgfSwKICAgIHRpbWVwZXJpb2Q6IGZ1bmN0aW9uIHRpbWVwZXJpb2QoKSB7CiAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgfSwKICAgIGZpbHRlckNhdGVnb3J5OiBmdW5jdGlvbiBmaWx0ZXJDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICB9LAogICAgZmlsdGVyQUZLOiBmdW5jdGlvbiBmaWx0ZXJBRksoKSB7CiAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgfSwKICAgIGluY2x1ZGVBdWRpYmxlOiBmdW5jdGlvbiBpbmNsdWRlQXVkaWJsZSgpIHsKICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ZpZXdzL2xvYWQnKTsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2F0ZWdvcmllcy9sb2FkJyk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICByZXR1cm4gX21vdW50ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gbW91bnRlZDsKICB9KCksCiAgbWV0aG9kczogewogICAgcHJldmlvdXNQZXJpb2Q6IGZ1bmN0aW9uIHByZXZpb3VzUGVyaW9kKCkgewogICAgICByZXR1cm4gbW9tZW50KHRoaXMuX2RhdGUpLnN1YnRyYWN0KDEsICIiLmNvbmNhdCh0aGlzLnBlcmlvZExlbmd0aCwgInMiKSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7CiAgICB9LAogICAgbmV4dFBlcmlvZDogZnVuY3Rpb24gbmV4dFBlcmlvZCgpIHsKICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLl9kYXRlKS5hZGQoMSwgIiIuY29uY2F0KHRoaXMucGVyaW9kTGVuZ3RoLCAicyIpKS5mb3JtYXQoJ1lZWVktTU0tREQnKTsKICAgIH0sCiAgICBwZXJpb2RMZW5ndGhDb252ZXJ0TW9tZW50OiBmdW5jdGlvbiBwZXJpb2RMZW5ndGhDb252ZXJ0TW9tZW50KHBlcmlvZExlbmd0aCkgewogICAgICBpZiAocGVyaW9kTGVuZ3RoID09PSAnZGF5JykgewogICAgICAgIHJldHVybiAnZGF5JzsKICAgICAgfSBlbHNlIGlmIChwZXJpb2RMZW5ndGggPT09ICd3ZWVrJykgewogICAgICAgIHJldHVybiAnaXNvV2Vlayc7CiAgICAgIH0gZWxzZSBpZiAocGVyaW9kTGVuZ3RoID09PSAnbW9udGgnKSB7CiAgICAgICAgcmV0dXJuICdtb250aCc7CiAgICAgIH0gZWxzZSBpZiAocGVyaW9kTGVuZ3RoID09PSAneWVhcicpIHsKICAgICAgICByZXR1cm4gJ3llYXInOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgcGVyaW9kTGVuZ3RoICR7cGVyaW9kTGVuZ3RofSwgZGVmYXVsdGluZyB0byAiZGF5IicpOwogICAgICAgIHJldHVybiAnZGF5JzsKICAgICAgfQogICAgfSwKICAgIHNldERhdGU6IGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgcGVyaW9kTGVuZ3RoKSB7CiAgICAgIGlmICghcGVyaW9kTGVuZ3RoKSB7CiAgICAgICAgcGVyaW9kTGVuZ3RoID0gdGhpcy5wZXJpb2RMZW5ndGg7CiAgICAgIH0KCiAgICAgIHZhciBuZXdfcGVyaW9kX2xlbmd0aF9tb21lbnQgPSB0aGlzLnBlcmlvZExlbmd0aENvbnZlcnRNb21lbnQocGVyaW9kTGVuZ3RoKTsKICAgICAgdmFyIG5ld19kYXRlID0gbW9tZW50KGRhdGUpLnN0YXJ0T2YobmV3X3BlcmlvZF9sZW5ndGhfbW9tZW50KS5mb3JtYXQoJ1lZWVktTU0tREQnKTsKICAgICAgY29uc29sZS5sb2cobmV3X2RhdGUsIHBlcmlvZExlbmd0aCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWN0aXZpdHkvIi5jb25jYXQodGhpcy5ob3N0LCAiLyIpLmNvbmNhdChwZXJpb2RMZW5ndGgsICIvIikuY29uY2F0KG5ld19kYXRlLCAiLyIpLmNvbmNhdCh0aGlzLnN1YnZpZXcpKTsKICAgIH0sCiAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmcmVzaCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGZvcmNlKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWN0aXZpdHkvZW5zdXJlX2xvYWRlZCcsIHsKICAgICAgICAgICAgICAgICAgdGltZXBlcmlvZDogdGhpcy50aW1lcGVyaW9kLAogICAgICAgICAgICAgICAgICBob3N0OiB0aGlzLmhvc3QsCiAgICAgICAgICAgICAgICAgIGZvcmNlOiBmb3JjZSwKICAgICAgICAgICAgICAgICAgZmlsdGVyQUZLOiB0aGlzLmZpbHRlckFGSywKICAgICAgICAgICAgICAgICAgaW5jbHVkZUF1ZGlibGU6IHRoaXMuaW5jbHVkZUF1ZGlibGUsCiAgICAgICAgICAgICAgICAgIGZpbHRlckNhdGVnb3JpZXM6IHRoaXMuZmlsdGVyQ2F0ZWdvcmllcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZnJlc2goX3gpIHsKICAgICAgICByZXR1cm4gX3JlZnJlc2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlZnJlc2g7CiAgICB9KCksCiAgICBsb2FkX2RlbW86IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2FkX2RlbW8gPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhY3Rpdml0eS9sb2FkX2RlbW8nKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9hZF9kZW1vKCkgewogICAgICAgIHJldHVybiBfbG9hZF9kZW1vLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2FkX2RlbW87CiAgICB9KCksCiAgICBjaGVja0Zvcm1WYWxpZGl0eTogZnVuY3Rpb24gY2hlY2tGb3JtVmFsaWRpdHkoKSB7CiAgICAgIHZhciBjaGVja3MgPSB7CiAgICAgICAgJ0lEIGlzIG5vdCB1bmlxdWUnOiB0aGlzLiRzdG9yZS5zdGF0ZS52aWV3cy52aWV3cy5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2LmlkOwogICAgICAgIH0pLmluY2x1ZGVzKHRoaXMubmV3X3ZpZXcuaWQpLAogICAgICAgICdNaXNzaW5nIG5hbWUnOiB0aGlzLm5ld192aWV3Lm5hbWUgPT09ICcnCiAgICAgIH07CiAgICAgIHZhciBlcnJvcnMgPSBPYmplY3QuZW50cmllcyhjaGVja3MpLmZpbHRlcihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICBfayA9IF9yZWYyWzBdLAogICAgICAgICAgICB2ID0gX3JlZjJbMV07CgogICAgICAgIHJldHVybiB2OwogICAgICB9KS5tYXAoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLAogICAgICAgICAgICBrID0gX3JlZjRbMF0sCiAgICAgICAgICAgIF92ID0gX3JlZjRbMV07CgogICAgICAgIHJldHVybiBrOwogICAgICB9KTsKICAgICAgdmFyIHZhbGlkID0gZXJyb3JzLmxlbmd0aCA9PSAwOwoKICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgIGFsZXJ0KCJJbnZhbGlkIGZvcm0gaW5wdXQ6ICIuY29uY2F0KGVycm9ycykpOwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWQ7CiAgICB9LAogICAgaGFuZGxlT2s6IGZ1bmN0aW9uIGhhbmRsZU9rKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuaGFuZGxlU3VibWl0KCk7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHZhbGlkID0gdGhpcy5jaGVja0Zvcm1WYWxpZGl0eSgpOwoKICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd2aWV3cy9hZGRWaWV3JywgewogICAgICAgIGlkOiB0aGlzLm5ld192aWV3LmlkLAogICAgICAgIG5hbWU6IHRoaXMubmV3X3ZpZXcubmFtZQogICAgICB9KTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kcmVmcy5uZXdfdmlldy5oaWRlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0TW9kYWw6IGZ1bmN0aW9uIHJlc2V0TW9kYWwoKSB7CiAgICAgIHRoaXMubmV3X3ZpZXcgPSB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnCiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Activity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAsHA,OAAA,MAAA,MAAA,QAAA;AACA,SAAA,yBAAA,EAAA,SAAA,QAAA,aAAA;AAGA,OAAA,8BAAA;AACA,OAAA,+BAAA;AACA,OAAA,wBAAA;AACA,OAAA,wBAAA;AACA,OAAA,wBAAA;AACA,OAAA,yBAAA;AACA,OAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,MADA;AAEA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KAFA;AAUA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,iBAAA;AAFA;AAVA,GAFA;AAiBA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,SAAA,EADA;AAEA,MAAA,cAAA,EAAA,IAFA;AAGA,MAAA,cAAA,EAAA,IAHA;AAIA,MAAA,SAAA,EAAA,IAJA;AAKA,MAAA,QAAA,EAAA;AALA,KAAA;AAOA,GAzBA;AA0BA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA,iBAAA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA;AACA,KAHA;AAIA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,aAAA,KAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,IAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,OAAA;AAAA,OAAA,KAAA,KAAA,KAAA,CAAA,CAAA,CAAA;AACA,KANA;AAOA,IAAA,KAAA,EAAA,iBAAA;AACA,aAAA,KAAA,IAAA,IAAA,SAAA,EAAA;AACA,KATA;AAUA,IAAA,OAAA,EAAA,mBAAA;AACA,aAAA,KAAA,MAAA,CAAA,IAAA,CAAA,OAAA;AACA,KAZA;AAaA,IAAA,UAAA,EAAA,sBAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,2BAAA,CAAA;AACA,UAAA,OAAA,GAAA,IAAA,CACA,GADA,CACA,UAAA,CAAA,EAAA;AACA,eAAA;AAAA,UAAA,IAAA,EAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AAAA,UAAA,KAAA,EAAA;AAAA,SAAA;AACA,OAHA,EAIA,IAJA,CAIA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA,IAAA,GAAA,CAAA,CAAA,IAAA;AAAA,OAJA,CAAA;AAKA,aAAA,CACA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA,eAAA;AAAA,QAAA,KAAA,EAAA,CAAA,eAAA;AAAA,OAFA,EAGA,MAHA,CAGA,OAHA,CAAA;AAIA,KAxBA;AAyBA,IAAA,gBAAA,EAAA,4BAAA;AACA,UAAA,KAAA,cAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,YAAA,OAAA,GAAA,SAAA,OAAA,CAAA,CAAA;AAAA,iBAAA,UAAA,CAAA;AAAA,mBAAA,CAAA,CAAA,MAAA,GAAA,CAAA,CAAA,MAAA,IAAA,SAAA,CAAA,EAAA,CAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAA,CAAA;AAAA,WAAA;AAAA,SAAA;;AACA,YAAA,QAAA,GAAA,QAAA,IAAA,EAAA,OAAA,CAAA,KAAA,cAAA,CAAA,CAAA;;AACA,eAAA,CAAA,KAAA,cAAA,EAAA,MAAA,CAAA,QAAA,CAAA;AACA,OALA,MAKA;AACA,eAAA,IAAA;AACA;AACA,KAlCA;AAmCA,IAAA,WAAA,EAAA,uBAAA;AACA,iCAAA,KAAA,IAAA,cAAA,KAAA,YAAA;AACA,KArCA;AAsCA,IAAA,WAAA,EAAA,uBAAA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,2CAAA,EAAA,KAAA,UAAA,CAAA;AACA,KAxCA;AAyCA,IAAA,UAAA,EAAA,sBAAA;AACA,aAAA;AAAA,QAAA,KAAA,EAAA,yBAAA,CAAA,KAAA,KAAA,CAAA;AAAA,QAAA,MAAA,EAAA,CAAA,CAAA,EAAA,KAAA,YAAA;AAAA,OAAA;AACA,KA3CA;AA4CA,IAAA,UAAA,EAAA,sBAAA;AACA,UAAA,KAAA,YAAA,KAAA,KAAA,EAAA;AACA,eAAA,YAAA;AACA,OAFA,MAEA,IAAA,KAAA,YAAA,KAAA,MAAA,EAAA;AACA,eAAA,YAAA;AACA,OAFA,MAEA,IAAA,KAAA,YAAA,KAAA,OAAA,EAAA;AACA,eAAA,SAAA;AACA,OAFA,MAEA,IAAA,KAAA,YAAA,KAAA,MAAA,EAAA;AACA,eAAA,MAAA;AACA,OAFA,MAEA;AACA,eAAA,YAAA;AACA;AACA,KAxDA;AAyDA,IAAA,cAAA,EAAA,0BAAA;AACA,aAAA,MAAA,CAAA,KAAA,UAAA,CAAA,KAAA,CAAA,CAAA,MAAA,CAAA,KAAA,UAAA,CAAA;AACA,KA3DA;AA4DA,IAAA,kBAAA,EAAA,8BAAA;AACA,aAAA,KAAA,yBAAA,CAAA,KAAA,YAAA,CAAA;AACA;AA9DA,GA1BA;AA0FA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AACA,WAAA,OAAA;AACA,KAHA;AAIA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,OAAA;AACA,KANA;AAOA,IAAA,cAAA,EAAA,0BAAA;AACA,WAAA,OAAA;AACA,KATA;AAUA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,OAAA;AACA,KAZA;AAaA,IAAA,cAAA,EAAA,0BAAA;AACA,WAAA,OAAA;AACA;AAfA,GA1FA;AA4GA,EAAA,OAAA;AAAA,6DAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,mBAAA,MAAA,CAAA,QAAA,CAAA,iBAAA;AAFA;AAAA,qBAGA,KAAA,OAAA,EAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA5GA;AAkHA,EAAA,OAAA,EAAA;AACA,IAAA,cAAA,EAAA,0BAAA;AACA,aAAA,MAAA,CAAA,KAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,YAAA,KAAA,YAAA,QAAA,MAAA,CAAA,YAAA,CAAA;AACA,KAHA;AAIA,IAAA,UAAA,EAAA,sBAAA;AACA,aAAA,MAAA,CAAA,KAAA,KAAA,CAAA,CAAA,GAAA,CAAA,CAAA,YAAA,KAAA,YAAA,QAAA,MAAA,CAAA,YAAA,CAAA;AACA,KANA;AAOA,IAAA,yBAPA,qCAOA,YAPA,EAOA;AACA,UAAA,YAAA,KAAA,KAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA,IAAA,YAAA,KAAA,MAAA,EAAA;AAEA,eAAA,SAAA;AACA,OAHA,MAGA,IAAA,YAAA,KAAA,OAAA,EAAA;AACA,eAAA,OAAA;AACA,OAFA,MAEA,IAAA,YAAA,KAAA,MAAA,EAAA;AACA,eAAA,MAAA;AACA,OAFA,MAEA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,2DAAA;AACA,eAAA,KAAA;AACA;AACA,KArBA;AAuBA,IAAA,OAAA,EAAA,iBAAA,IAAA,EAAA,YAAA,EAAA;AAEA,UAAA,CAAA,YAAA,EAAA;AACA,QAAA,YAAA,GAAA,KAAA,YAAA;AACA;;AACA,UAAA,wBAAA,GAAA,KAAA,yBAAA,CAAA,YAAA,CAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,wBAAA,EAAA,MAAA,CAAA,YAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,YAAA;AACA,WAAA,OAAA,CAAA,IAAA,qBAAA,KAAA,IAAA,cAAA,YAAA,cAAA,QAAA,cAAA,KAAA,OAAA;AACA,KAhCA;AAkCA,IAAA,OAAA;AAAA,+DAAA,kBAAA,KAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,MAAA,CAAA,QAAA,CAAA,wBAAA,EAAA;AACA,kBAAA,UAAA,EAAA,KAAA,UADA;AAEA,kBAAA,IAAA,EAAA,KAAA,IAFA;AAGA,kBAAA,KAAA,EAAA,KAHA;AAIA,kBAAA,SAAA,EAAA,KAAA,SAJA;AAKA,kBAAA,cAAA,EAAA,KAAA,cALA;AAMA,kBAAA,gBAAA,EAAA,KAAA;AANA,iBAAA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAlCA;AA6CA,IAAA,SAAA;AAAA,iEAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OA7CA;AAiDA,IAAA,iBAjDA,+BAiDA;AAEA,UAAA,MAAA,GAAA;AAEA,4BAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,EAAA;AAAA,SAAA,EAAA,QAAA,CAAA,KAAA,QAAA,CAAA,EAAA,CAFA;AAGA,wBAAA,KAAA,QAAA,CAAA,IAAA,KAAA;AAHA,OAAA;AAKA,UAAA,MAAA,GAAA,MAAA,CAAA,OAAA,CAAA,MAAA,EACA,MADA,CACA;AAAA;AAAA,YAAA,EAAA;AAAA,YAAA,CAAA;;AAAA,eAAA,CAAA;AAAA,OADA,EAEA,GAFA,CAEA;AAAA;AAAA,YAAA,CAAA;AAAA,YAAA,EAAA;;AAAA,eAAA,CAAA;AAAA,OAFA,CAAA;AAGA,UAAA,KAAA,GAAA,MAAA,CAAA,MAAA,IAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,QAAA,KAAA,+BAAA,MAAA,EAAA;AACA;;AACA,aAAA,KAAA;AACA,KAhEA;AAkEA,IAAA,QAlEA,oBAkEA,KAlEA,EAkEA;AAEA,MAAA,KAAA,CAAA,cAAA;AAEA,WAAA,YAAA;AACA,KAvEA;AAyEA,IAAA,YAzEA,0BAyEA;AAAA;;AAEA,UAAA,KAAA,GAAA,KAAA,iBAAA,EAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA;AACA;;AAEA,WAAA,MAAA,CAAA,MAAA,CAAA,eAAA,EAAA;AAAA,QAAA,EAAA,EAAA,KAAA,QAAA,CAAA,EAAA;AAAA,QAAA,IAAA,EAAA,KAAA,QAAA,CAAA;AAAA,OAAA;AAGA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAtFA;AAwFA,IAAA,UAxFA,wBAwFA;AACA,WAAA,QAAA,GAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AAIA;AA7FA;AAlHA,CAAA","sourcesContent":["<template lang=\"pug\">\ndiv\n  h3.mb-0 Activity for {{ periodReadable }}\n\n  div.mb-2\n    ul.list-group.list-group-horizontal-md.mb-3(style=\"font-size: 0.9em; opacity: 0.7\")\n      li.list-group-item.pl-0.pr-3.py-0(style=\"border: 0\")\n        | #[b Host:] {{ host }}\n      li.list-group-item.pl-0.pr-3.py-0(style=\"border: 0\")\n        | #[b Time active:] {{ $store.state.activity.active.duration | friendlyduration }}\n\n  div.mb-2.d-flex\n    div\n      b-input-group\n        b-input-group-prepend\n          b-button.px-2(:to=\"link_prefix + '/' + previousPeriod() + '/' + subview\",\n                   variant=\"outline-dark\")\n            icon(name=\"arrow-left\")\n        b-select.px-2(:value=\"periodLength\", :options=\"['day', 'week', 'month']\",\n                 @change=\"(periodLength) => setDate(_date, periodLength)\")\n        b-input-group-append\n          b-button.px-2(:to=\"link_prefix + '/' + nextPeriod() + '/' + subview\",\n                   :disabled=\"nextPeriod() > today\", variant=\"outline-dark\")\n            icon(name=\"arrow-right\")\n\n    div.mx-2(v-if=\"periodLength === 'day'\")\n      input.form-control.px-2(id=\"date\" type=\"date\" :value=\"_date\" :max=\"today\"\n                         @change=\"setDate($event.target.value, periodLength)\")\n\n    div.ml-auto\n      b-button-group\n        b-button.px-2(@click=\"refresh(true)\", variant=\"outline-dark\")\n          icon(name=\"sync\")\n          span.d-none.d-md-inline\n            |  Refresh\n\n  aw-periodusage(:periodusage_arr=\"periodusage\", @update=\"setDate\")\n\n  ul.row.nav.nav-tabs.mt-3.px-3\n    li.nav-item(v-for=\"view in views\")\n      router-link.nav-link(:to=\"{ name: 'activity-view', params: {...$route.params, view_id: view.id}}\" :class=\"{'router-link-exact-active': currentView.id == view.id}\")\n        h6 {{view.name}}\n\n    li.nav-item(style=\"margin-left: auto\")\n      a.nav-link(@click=\"$refs.new_view.show()\")\n        h6\n          icon(name=\"plus\")\n          span.d-none.d-md-inline\n            | New view\n\n  b-modal(id=\"new_view\" ref=\"new_view\" title=\"New view\" @show=\"resetModal\" @hidden=\"resetModal\" @ok=\"handleOk\")\n    div.my-1\n      b-input-group.my-1(prepend=\"ID\")\n        b-form-input(v-model=\"new_view.id\")\n      b-input-group.my-1(prepend=\"Name\")\n        b-form-input(v-model=\"new_view.name\")\n\n  div\n    router-view\n\n  div\n    hr\n    h5 Options\n\n    div.row\n      div.col-lg-6\n        b-form-checkbox(v-model=\"filterAFK\")\n          | Filter AFK\n        b-form-checkbox(v-model=\"includeAudible\")\n          | Count audible browser tab as active\n\n      div.col-lg-6\n        b-form-group(label=\"Show/filter category\" label-cols=\"5\" label-cols-lg=\"4\")\n          b-form-select(v-model=\"filterCategory\", :options=\"categories\")\n\n    aw-devonly\n      b-btn(id=\"load-demo\", @click=\"load_demo\")\n        | Load demo data\n</template>\n\n<style lang=\"scss\" scoped>\n$buttoncolor: #ddd;\n$bordercolor: #ddd;\n\n.nav {\n  border-bottom: 2px solid $bordercolor;\n\n  .nav-item {\n    margin-bottom: -2px;\n\n    .nav-link {\n      background-color: $buttoncolor;\n      margin: 0 0.2em 0 0.2em;\n      padding: 0.4em 0.5em 0.1em 0.5em;\n      border: 2px solid $bordercolor;\n      border-bottom: none;\n      border-radius: 0.5rem 0.5rem 0 0;\n      color: #111 !important;\n      cursor: pointer;\n\n      &:hover {\n        background-color: #f8f8f8;\n      }\n\n      &.router-link-exact-active {\n        background-color: #fff;\n        color: #333 !important;\n\n        &:hover {\n          background-color: #fff;\n        }\n      }\n    }\n  }\n}\n</style>\n\n<script>\nimport moment from 'moment';\nimport { get_day_start_with_offset, get_today } from '~/util/time';\nimport _ from 'lodash';\n\nimport 'vue-awesome/icons/arrow-left';\nimport 'vue-awesome/icons/arrow-right';\nimport 'vue-awesome/icons/sync';\nimport 'vue-awesome/icons/plus';\nimport 'vue-awesome/icons/edit';\nimport 'vue-awesome/icons/times';\nimport 'vue-awesome/icons/save';\n\nexport default {\n  name: 'Activity',\n  props: {\n    host: String,\n    date: {\n      type: String,\n      // NOTE: This does not work as you'd might expect since the default is set on\n      // initialization, which would lead to the same date always being returned,\n      // even if the day has changed.\n      // Instead, use the computed _date.\n      //default: get_today(),\n    },\n    periodLength: {\n      type: String,\n      default: 'day',\n    },\n  },\n  data: function () {\n    return {\n      today: get_today(),\n      filterCategory: null,\n      includeAudible: true,\n      filterAFK: true,\n      new_view: {},\n    };\n  },\n  computed: {\n    views: function () {\n      return this.$store.state.views.views;\n    },\n    currentView: function () {\n      return this.views.find(v => v.id == this.$route.params.view_id) || this.views[0];\n    },\n    _date: function () {\n      return this.date || get_today();\n    },\n    subview: function () {\n      return this.$route.meta.subview;\n    },\n    categories: function () {\n      const cats = this.$store.getters['categories/all_categories'];\n      const entries = cats\n        .map(c => {\n          return { text: c.join(' > '), value: c };\n        })\n        .sort((a, b) => a.text > b.text);\n      return [\n        { text: 'All', value: null },\n        { text: 'Uncategorized', value: ['Uncategorized'] },\n      ].concat(entries);\n    },\n    filterCategories: function () {\n      if (this.filterCategory) {\n        const cats = this.$store.getters['categories/all_categories'];\n        const isChild = p => c => c.length > p.length && _.isEqual(p, c.slice(0, p.length));\n        const children = _.filter(cats, isChild(this.filterCategory));\n        return [this.filterCategory].concat(children);\n      } else {\n        return null;\n      }\n    },\n    link_prefix: function () {\n      return `/activity/${this.host}/${this.periodLength}`;\n    },\n    periodusage: function () {\n      return this.$store.getters['activity/getActiveHistoryAroundTimeperiod'](this.timeperiod);\n    },\n    timeperiod: function () {\n      return { start: get_day_start_with_offset(this._date), length: [1, this.periodLength] };\n    },\n    dateformat: function () {\n      if (this.periodLength === 'day') {\n        return 'YYYY-MM-DD';\n      } else if (this.periodLength === 'week') {\n        return 'YYYY[ W]WW';\n      } else if (this.periodLength === 'month') {\n        return 'YYYY-MM';\n      } else if (this.periodLength === 'year') {\n        return 'YYYY';\n      } else {\n        return 'YYYY-MM-DD';\n      }\n    },\n    periodReadable: function () {\n      return moment(this.timeperiod.start).format(this.dateformat);\n    },\n    periodLengthMoment: function () {\n      return this.periodLengthConvertMoment(this.periodLength);\n    },\n  },\n  watch: {\n    host: function () {\n      this.refresh();\n    },\n    timeperiod: function () {\n      this.refresh();\n    },\n    filterCategory: function () {\n      this.refresh();\n    },\n    filterAFK: function () {\n      this.refresh();\n    },\n    includeAudible: function () {\n      this.refresh();\n    },\n  },\n\n  mounted: async function () {\n    this.$store.dispatch('views/load');\n    this.$store.dispatch('categories/load');\n    await this.refresh();\n  },\n\n  methods: {\n    previousPeriod: function () {\n      return moment(this._date).subtract(1, `${this.periodLength}s`).format('YYYY-MM-DD');\n    },\n    nextPeriod: function () {\n      return moment(this._date).add(1, `${this.periodLength}s`).format('YYYY-MM-DD');\n    },\n    periodLengthConvertMoment(periodLength) {\n      if (periodLength === 'day') {\n        return 'day';\n      } else if (periodLength === 'week') {\n        /* This is necessary so the week starts on Monday instead of Sunday */\n        return 'isoWeek';\n      } else if (periodLength === 'month') {\n        return 'month';\n      } else if (periodLength === 'year') {\n        return 'year';\n      } else {\n        console.error('Invalid periodLength ${periodLength}, defaulting to \"day\"');\n        return 'day';\n      }\n    },\n\n    setDate: function (date, periodLength) {\n      // periodLength is an optional argument, default to this.periodLength\n      if (!periodLength) {\n        periodLength = this.periodLength;\n      }\n      const new_period_length_moment = this.periodLengthConvertMoment(periodLength);\n      const new_date = moment(date).startOf(new_period_length_moment).format('YYYY-MM-DD');\n      console.log(new_date, periodLength);\n      this.$router.push(`/activity/${this.host}/${periodLength}/${new_date}/${this.subview}`);\n    },\n\n    refresh: async function (force) {\n      await this.$store.dispatch('activity/ensure_loaded', {\n        timeperiod: this.timeperiod,\n        host: this.host,\n        force: force,\n        filterAFK: this.filterAFK,\n        includeAudible: this.includeAudible,\n        filterCategories: this.filterCategories,\n      });\n    },\n\n    load_demo: async function () {\n      await this.$store.dispatch('activity/load_demo');\n    },\n\n    checkFormValidity() {\n      // All checks must be false for check to pass\n      const checks = {\n        // Check if view id is unique\n        'ID is not unique': this.$store.state.views.views.map(v => v.id).includes(this.new_view.id),\n        'Missing name': this.new_view.name === '',\n      };\n      const errors = Object.entries(checks)\n        .filter(([_k, v]) => v)\n        .map(([k, _v]) => k);\n      const valid = errors.length == 0;\n      if (!valid) {\n        alert(`Invalid form input: ${errors}`);\n      }\n      return valid;\n    },\n\n    handleOk(event) {\n      // Prevent modal from closing\n      event.preventDefault();\n      // Trigger submit handler\n      this.handleSubmit();\n    },\n\n    handleSubmit() {\n      // Exit when the form isn't valid\n      const valid = this.checkFormValidity();\n      if (!valid) {\n        return;\n      }\n\n      this.$store.commit('views/addView', { id: this.new_view.id, name: this.new_view.name });\n\n      // Hide the modal manually\n      this.$nextTick(() => {\n        this.$refs.new_view.hide();\n      });\n    },\n\n    resetModal() {\n      this.new_view = {\n        id: '',\n        name: '',\n      };\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/views/activity"}]}