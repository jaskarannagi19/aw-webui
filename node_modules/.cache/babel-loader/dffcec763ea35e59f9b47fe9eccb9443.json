{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/visualizations/timeline.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/visualizations/timeline.js","mtime":1622830085278},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKdmFyIGQzID0gcmVxdWlyZSgnZDMnKTsKCnZhciBDb2xvciA9IHJlcXVpcmUoJ2NvbG9yJyk7Cgp2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpOwoKdmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpOwoKaW1wb3J0IHsgZ2V0Q29sb3JGcm9tU3RyaW5nIH0gZnJvbSAnLi4vdXRpbC9jb2xvcic7CmltcG9ydCB7IHNlY29uZHNfdG9fZHVyYXRpb24gfSBmcm9tICcuLi91dGlsL3RpbWUuanMnOwoKZnVuY3Rpb24gc2hvd19pbmZvKGNvbnRhaW5lciwgZWxlbV9pZCkgewogIHZhciB0aXRsZV9ldmVudF9ib3ggPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignIycgKyBlbGVtX2lkKTsKICB2YXIgdGl0bGVpbmZvID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aXRsZWluZm8tY29udGFpbmVyJyk7CiAgdGl0bGVpbmZvLmlubmVySFRNTCA9IHRpdGxlX2V2ZW50X2JveC5pbm5lckhUTUw7CiAgdGl0bGVpbmZvLnN0eWxlLmhlaWdodCA9IHRpdGxlX2V2ZW50X2JveC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpOwp9CgpmdW5jdGlvbiBjcmVhdGUoY29udGFpbmVyKSB7CiAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogIGQzLnNlbGVjdChjb250YWluZXIpLmFwcGVuZCgnc3ZnJykuYXR0cignY2xhc3MnLCAnYXBwdGltZWxpbmUnKS5hdHRyKCd2aWV3Qm94JywgJzAgMCAxMDAgMTAnKS5hdHRyKCd3aWR0aCcsICcxMDAlJyk7CiAgZDMuc2VsZWN0KGNvbnRhaW5lcikuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICd0aXRsZWluZm8tbGlzdCcpLmF0dHIoJ2Rpc3BsYXknLCAnbm9uZScpOwogIHZhciB0aXRsZWluZm9fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgdGl0bGVpbmZvX2NvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICB0aXRsZWluZm9fY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7CiAgdGl0bGVpbmZvX2NvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJzsKICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGVpbmZvX2NvbnRhaW5lcik7CiAgZDMuc2VsZWN0KHRpdGxlaW5mb19jb250YWluZXIpLmFwcGVuZCgnZGl2JykuYXR0cignd2lkdGgnLCAnMTAwJScpLmF0dHIoJ2NsYXNzJywgJ3RpdGxlaW5mby1jb250YWluZXInKTsKfQoKZnVuY3Rpb24gc2V0X3N0YXR1cyhjb250YWluZXIsIHRleHQpIHsKICB2YXIgdGltZWxpbmVfZWxlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYXBwdGltZWxpbmUnKTsKICB2YXIgdGl0bGVpbmZvX2xpc3RfZWxlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGl0bGVpbmZvLWxpc3QnKTsKICB2YXIgdGl0bGVpbmZvX2NvbnRhaW5lcl9lbGVtID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aXRsZWluZm8tY29udGFpbmVyJyk7CiAgdmFyIHRpbWVsaW5lID0gZDMuc2VsZWN0KHRpbWVsaW5lX2VsZW0pOwogIHRpbWVsaW5lX2VsZW0uaW5uZXJIVE1MID0gJyc7CiAgdGl0bGVpbmZvX2xpc3RfZWxlbS5pbm5lckhUTUwgPSAnJzsKICB0aXRsZWluZm9fY29udGFpbmVyX2VsZW0uaW5uZXJIVE1MID0gJyc7CiAgdGltZWxpbmUuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsICcwJykuYXR0cigneScsICczJykudGV4dCh0ZXh0KS5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJykuYXR0cignZm9udC1zaXplJywgJzMnKS5hdHRyKCdmaWxsJywgJ2JsYWNrJyk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZShjb250YWluZXIsIGV2ZW50cywgc2hvd0FGSywgY2h1bmtmdW5jLCBldmVudGZ1bmMpIHsKICB2YXIgdGltZWxpbmUgPSBkMy5zZWxlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hcHB0aW1lbGluZScpKS5odG1sKG51bGwpOwogIHZhciB0aXRsZWluZm9fbGlzdCA9IGQzLnNlbGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcignLnRpdGxlaW5mby1saXN0JykpLmh0bWwobnVsbCk7CiAgZDMuc2VsZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGl0bGVpbmZvLWNvbnRhaW5lcicpKS5odG1sKG51bGwpOwoKICBpZiAoZXZlbnRzLmxlbmd0aCA8PSAwKSB7CiAgICBzZXRfc3RhdHVzKGNvbnRhaW5lciwgJ05vIGRhdGEnKTsKICAgIHJldHVybjsKICB9CgogIHZhciBmaXJzdEV2ZW50ID0gZXZlbnRzWzBdOwogIHZhciBsYXN0RXZlbnQgPSBldmVudHNbZXZlbnRzLmxlbmd0aCAtIDFdOwogIHZhciB0aW1lU3RhcnQgPSBtb21lbnQoZmlyc3RFdmVudC50aW1lc3RhbXApOwogIHZhciB0aW1lRW5kID0gbW9tZW50KGxhc3RFdmVudC50aW1lc3RhbXApLmFkZChsYXN0RXZlbnQuZHVyYXRpb24sICdzZWNvbmRzJyk7CgogIHZhciB0b3RhbER1cmF0aW9uID0gXy5zdW1CeShldmVudHMsICdkdXJhdGlvbicpOwoKICB2YXIgc2VjU2luY2VTdGFydCA9IHRpbWVFbmQuZGlmZih0aW1lU3RhcnQsICdzZWNvbmRzJywgdHJ1ZSk7CiAgdmFyIGN1cnJfeCA9IDA7CgogIF8uZWFjaChldmVudHMsIGZ1bmN0aW9uIChlLCBpKSB7CiAgICB2YXIgZXZlbnRYLCBldmVudFdpZHRoOwoKICAgIGlmIChzaG93QUZLKSB7CiAgICAgIHZhciBldmVudEJlZ2luID0gbW9tZW50KGUudGltZXN0YW1wKTsKICAgICAgZXZlbnRYID0gZXZlbnRCZWdpbi5kaWZmKHRpbWVTdGFydCwgJ3NlY29uZHMnLCB0cnVlKSAvIHNlY1NpbmNlU3RhcnQ7CiAgICAgIGV2ZW50WCA9IGV2ZW50WCAqIDEwMCArICclJzsKICAgICAgZXZlbnRXaWR0aCA9IGUuZHVyYXRpb24gLyBzZWNTaW5jZVN0YXJ0ICogMTAwICsgJyUnOwogICAgfSBlbHNlIHsKICAgICAgZXZlbnRYID0gY3Vycl94OwogICAgICBldmVudFdpZHRoID0gZS5kdXJhdGlvbiAvIHRvdGFsRHVyYXRpb24gKiAxMDA7CiAgICB9CgogICAgdmFyIGFwcGNvbG9yID0gZ2V0Q29sb3JGcm9tU3RyaW5nKGNodW5rZnVuYyhlKSk7CiAgICB2YXIgaG92ZXJjb2xvciA9IENvbG9yKGFwcGNvbG9yKS5kYXJrZW4oMC40KS5oZXgoKTsKICAgIHZhciBlZyA9IHRpbWVsaW5lLmFwcGVuZCgnZycpLmF0dHIoJ2lkJywgJ3RpbWVsaW5lX2V2ZW50XycgKyBpKTsKICAgIHZhciByZWN0ID0gZWcuYXBwZW5kKCdyZWN0JykuYXR0cigneCcsIGV2ZW50WCkuYXR0cigneScsIDApLmF0dHIoJ3dpZHRoJywgZXZlbnRXaWR0aCkuYXR0cignaGVpZ2h0JywgMTApLnN0eWxlKCdmaWxsJywgYXBwY29sb3IpLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJlY3Quc3R5bGUoJ2ZpbGwnLCBob3ZlcmNvbG9yKTsKICAgICAgc2hvd19pbmZvKGNvbnRhaW5lciwgJ3RpdGxlaW5mb19ldmVudF8nICsgaSk7CiAgICB9KS5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJlY3Quc3R5bGUoJ2ZpbGwnLCBhcHBjb2xvcik7CiAgICB9KTsKICAgIHZhciBpbmZvYm94ID0gdGl0bGVpbmZvX2xpc3QuYXBwZW5kKCdkaXYnKS5hdHRyKCdpZCcsICd0aXRsZWluZm9fZXZlbnRfJyArIGkpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIGluZm9ib3guYXBwZW5kKCdoNScpLmF0dHIoJ3gnLCAnMTBweCcpLmF0dHIoJ3knLCAnMjBweCcpLnRleHQoY2h1bmtmdW5jKGUpICsgJyAoJyArIHNlY29uZHNfdG9fZHVyYXRpb24oZS5kdXJhdGlvbikgKyAnKScpLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKS5hdHRyKCdmb250LXNpemUnLCAnMjBweCcpLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKTsKICAgIHZhciBpbmZvbGlzdCA9IGluZm9ib3guYXBwZW5kKCd0YWJsZScpOwoKICAgIF8uZWFjaChlLmRhdGEuc3ViZXZlbnRzLCBmdW5jdGlvbiAodCkgewogICAgICB2YXIgaW5mb3JvdyA9IGluZm9saXN0LmFwcGVuZCgndHInKTsKICAgICAgdmFyIGNsb2NrdGltZSA9IG1vbWVudCh0LnRpbWVzdGFtcCkuZm9ybWF0KCdISDptbTpzcycpOwogICAgICBpbmZvcm93LmFwcGVuZCgndGQnKS50ZXh0KGNsb2NrdGltZSk7CiAgICAgIHZhciBkdXJhdGlvbiA9IHNlY29uZHNfdG9fZHVyYXRpb24odC5kdXJhdGlvbik7CiAgICAgIGluZm9yb3cuYXBwZW5kKCd0ZCcpLnRleHQoZHVyYXRpb24pLnN0eWxlKCdwYWRkaW5nLWxlZnQnLCAnMWVtJykuc3R5bGUoJ3RleHQtYWxpZ24nLCAncmlnaHQnKTsKICAgICAgaW5mb3Jvdy5hcHBlbmQoJ3RkJykudGV4dChldmVudGZ1bmModCkpLnN0eWxlKCdwYWRkaW5nLWxlZnQnLCAnMWVtJyk7CiAgICB9KTsKCiAgICBjdXJyX3ggKz0gZXZlbnRXaWR0aDsKICB9KTsKCiAgcmV0dXJuIGNvbnRhaW5lcjsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZTogY3JlYXRlLAogIHVwZGF0ZTogdXBkYXRlLAogIHNldF9zdGF0dXM6IHNldF9zdGF0dXMKfTs="},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/visualizations/timeline.js"],"names":["d3","require","Color","_","moment","getColorFromString","seconds_to_duration","show_info","container","elem_id","title_event_box","querySelector","titleinfo","innerHTML","style","height","getAttribute","create","select","append","attr","titleinfo_container","document","createElement","width","overflowY","appendChild","set_status","text","timeline_elem","titleinfo_list_elem","titleinfo_container_elem","timeline","update","events","showAFK","chunkfunc","eventfunc","html","titleinfo_list","length","firstEvent","lastEvent","timeStart","timestamp","timeEnd","add","duration","totalDuration","sumBy","secSinceStart","diff","curr_x","each","e","i","eventX","eventWidth","eventBegin","appcolor","hovercolor","darken","hex","eg","rect","on","infobox","infolist","data","subevents","t","inforow","clocktime","format"],"mappings":"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","sourcesContent":["'use strict';\n\n/*\n * Creates a colored timeline where you can hover for more info.\n */\n\nconst d3 = require('d3');\nconst Color = require('color');\nconst _ = require('lodash');\nconst moment = require('moment');\n\nimport { getColorFromString } from '../util/color';\n\nimport { seconds_to_duration } from '../util/time.js';\n\nfunction show_info(container, elem_id) {\n  const title_event_box = container.querySelector('#' + elem_id);\n  const titleinfo = container.querySelector('.titleinfo-container');\n  titleinfo.innerHTML = title_event_box.innerHTML;\n  titleinfo.style.height = title_event_box.getAttribute('height');\n}\n\nfunction create(container) {\n  // Clear element\n  container.innerHTML = '';\n\n  // svg for the colored timeline\n  d3.select(container)\n    .append('svg')\n    .attr('class', 'apptimeline')\n    .attr('viewBox', '0 0 100 10')\n    .attr('width', '100%');\n\n  // Hidden svg image that stores all titleinfo for each timeperiod\n  d3.select(container).append('div').attr('class', 'titleinfo-list').attr('display', 'none');\n\n  // Container for titleinfo that has a fixed size and a overflow scroll\n  const titleinfo_container = document.createElement('div');\n  titleinfo_container.style.width = '100%';\n  titleinfo_container.style.height = '200px';\n  titleinfo_container.style.overflowY = 'scroll';\n  container.appendChild(titleinfo_container);\n\n  // Titleinfo box that changes content depending on what was timeperiod was last recently hovered on\n  d3.select(titleinfo_container)\n    .append('div')\n    .attr('width', '100%')\n    .attr('class', 'titleinfo-container');\n}\n\nfunction set_status(container, text) {\n  const timeline_elem = container.querySelector('.apptimeline');\n  const titleinfo_list_elem = container.querySelector('.titleinfo-list');\n  const titleinfo_container_elem = container.querySelector('.titleinfo-container');\n\n  const timeline = d3.select(timeline_elem);\n  timeline_elem.innerHTML = '';\n  titleinfo_list_elem.innerHTML = '';\n  titleinfo_container_elem.innerHTML = '';\n\n  timeline\n    .append('text')\n    .attr('x', '0')\n    .attr('y', '3')\n    .text(text)\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', '3')\n    .attr('fill', 'black');\n}\n\nfunction update(container, events, showAFK, chunkfunc, eventfunc) {\n  const timeline = d3.select(container.querySelector('.apptimeline')).html(null);\n  const titleinfo_list = d3.select(container.querySelector('.titleinfo-list')).html(null);\n  d3.select(container.querySelector('.titleinfo-container')).html(null);\n\n  if (events.length <= 0) {\n    set_status(container, 'No data');\n    return;\n  }\n\n  const firstEvent = events[0];\n  const lastEvent = events[events.length - 1];\n\n  const timeStart = moment(firstEvent.timestamp);\n  const timeEnd = moment(lastEvent.timestamp).add(lastEvent.duration, 'seconds');\n  const totalDuration = _.sumBy(events, 'duration');\n\n  const secSinceStart = timeEnd.diff(timeStart, 'seconds', true);\n\n  // Iterate over each app timeperiod\n  let curr_x = 0;\n  _.each(events, function (e, i) {\n    // Timeline rect\n\n    let eventX, eventWidth;\n    if (showAFK) {\n      const eventBegin = moment(e.timestamp);\n      eventX = eventBegin.diff(timeStart, 'seconds', true) / secSinceStart;\n      eventX = eventX * 100 + '%';\n      eventWidth = (e.duration / secSinceStart) * 100 + '%';\n    } else {\n      eventX = curr_x;\n      eventWidth = (e.duration / totalDuration) * 100;\n    }\n\n    const appcolor = getColorFromString(chunkfunc(e));\n    const hovercolor = Color(appcolor).darken(0.4).hex();\n\n    const eg = timeline.append('g').attr('id', 'timeline_event_' + i);\n\n    const rect = eg\n      .append('rect')\n      .attr('x', eventX)\n      .attr('y', 0)\n      .attr('width', eventWidth)\n      .attr('height', 10)\n      .style('fill', appcolor)\n      .on('mouseover', () => {\n        rect.style('fill', hovercolor);\n        show_info(container, 'titleinfo_event_' + i);\n      })\n      .on('mouseout', () => {\n        rect.style('fill', appcolor);\n      });\n\n    // Titleinfo box\n    const infobox = titleinfo_list\n      .append('div')\n      .attr('id', 'titleinfo_event_' + i)\n      .style('display', 'none');\n\n    // Appname and duration text\n    infobox\n      .append('h5')\n      .attr('x', '10px')\n      .attr('y', '20px')\n      .text(chunkfunc(e) + ' (' + seconds_to_duration(e.duration) + ')')\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '20px')\n      .attr('fill', 'black');\n\n    // Titleinfo\n    const infolist = infobox.append('table');\n    _.each(e.data.subevents, function (t) {\n      const inforow = infolist.append('tr');\n      // Clocktime\n      const clocktime = moment(t.timestamp).format('HH:mm:ss');\n      inforow.append('td').text(clocktime);\n      // Duration\n      const duration = seconds_to_duration(t.duration);\n      inforow.append('td').text(duration).style('padding-left', '1em').style('text-align', 'right');\n      // Title\n      inforow.append('td').text(eventfunc(t)).style('padding-left', '1em');\n    });\n\n    curr_x += eventWidth;\n  });\n\n  return container;\n}\n\nexport default {\n  create: create,\n  update: update,\n  set_status: set_status,\n};\n"]}]}