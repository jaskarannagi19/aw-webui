{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/Stopwatch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/Stopwatch.vue","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2phc2thcmFuL2NvZGUvamFza2FyYW4vYWN0aXZpdHl3YXRjaC9hdy1zZXJ2ZXItcnVzdC9hdy13ZWJ1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZ3JvdXBCeSBmcm9tICJsb2Rhc2gvZ3JvdXBCeSI7CmltcG9ydCBfZmlsdGVyIGZyb20gImxvZGFzaC9maWx0ZXIiOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBTdG9wd2F0Y2hFbnRyeSBmcm9tICcuLi9jb21wb25lbnRzL1N0b3B3YXRjaEVudHJ5LnZ1ZSc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvcGxheSc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvdHJhc2gnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N0b3B3YXRjaCcsCiAgY29tcG9uZW50czogewogICAgJ3N0b3B3YXRjaC1lbnRyeSc6IFN0b3B3YXRjaEVudHJ5CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnVja2V0X2lkOiAnYXctc3RvcHdhdGNoJywKICAgICAgZXZlbnRzOiBbXSwKICAgICAgbGFiZWw6ICcnLAogICAgICBub3c6IG1vbWVudCgpCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJ1bm5pbmdUaW1lcnM6IGZ1bmN0aW9uIHJ1bm5pbmdUaW1lcnMoKSB7CiAgICAgIHJldHVybiBfZmlsdGVyKHRoaXMuZXZlbnRzLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmRhdGEucnVubmluZzsKICAgICAgfSk7CiAgICB9LAogICAgc3RvcHBlZFRpbWVyczogZnVuY3Rpb24gc3RvcHBlZFRpbWVycygpIHsKICAgICAgcmV0dXJuIF9maWx0ZXIodGhpcy5ldmVudHMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICFlLmRhdGEucnVubmluZzsKICAgICAgfSk7CiAgICB9LAogICAgdGltZXJzQnlEYXRlOiBmdW5jdGlvbiB0aW1lcnNCeURhdGUoKSB7CiAgICAgIHJldHVybiBfZ3JvdXBCeSh0aGlzLnN0b3BwZWRUaW1lcnMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIG1vbWVudChlLnRpbWVzdGFtcCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy4kYXcuZW5zdXJlQnVja2V0KHRoaXMuYnVja2V0X2lkLCAnZ2VuZXJhbC5zdG9wd2F0Y2gnLCAndW5rbm93bicpOwogICAgdGhpcy5nZXRFdmVudHMoKTsKICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLm5vdyA9IG1vbWVudCgpOwogICAgfSwgMTAwMCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydFRpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3RhcnRUaW1lciA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobGFiZWwpIHsKICAgICAgICB2YXIgZXZlbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kYXcuaW5zZXJ0RXZlbnQodGhpcy5idWNrZXRfaWQsIHsKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgcnVubmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGV2ZW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnVuc2hpZnQoZXZlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc3RhcnRUaW1lcihfeCkgewogICAgICAgIHJldHVybiBfc3RhcnRUaW1lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3RhcnRUaW1lcjsKICAgIH0oKSwKICAgIHVwZGF0ZVRpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlVGltZXIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihuZXdfZXZlbnQpIHsKICAgICAgICB2YXIgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaSA9IHRoaXMuZXZlbnRzLmZpbmRJbmRleChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZS5pZCA9PSBuZXdfZXZlbnQuaWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaSAhPSAtMSkgewogICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5ldmVudHMsIGksIG5ld19ldmVudCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCc6KCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lcihfeDIpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVRpbWVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVUaW1lcjsKICAgIH0oKSwKICAgIHJlbW92ZVRpbWVyOiBmdW5jdGlvbiByZW1vdmVUaW1lcihldmVudCkgewogICAgICB0aGlzLmV2ZW50cyA9IF9maWx0ZXIodGhpcy5ldmVudHMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgIT0gZXZlbnQuaWQ7CiAgICAgIH0pOwogICAgfSwKICAgIGdldEV2ZW50czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEV2ZW50cyA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kYXcuZ2V0RXZlbnRzKHRoaXMuYnVja2V0X2lkLCB7CiAgICAgICAgICAgICAgICAgIGxpbWl0OiAxMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cyA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRFdmVudHMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRFdmVudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEV2ZW50czsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["Stopwatch.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"pug\">\ndiv\n  h2 Stopwatch\n  p\n    | Using bucket: {{bucket_id}}\n\n  b-alert(show)\n    | This is an early experiment, an important missing feature is the ability to set start/end times manually.\n\n  b-input-group(size=\"lg\")\n    b-input(v-model=\"label\" placeholder=\"What are you working on?\")\n    b-input-group-append\n      b-button(@click=\"startTimer(label)\", variant=\"success\")\n        icon(name=\"play\")\n        | Start\n\n  hr\n\n  div.row\n    div.col-md-12\n      div(v-if=\"runningTimers.length > 0\")\n        h3 Running\n        div(v-for=\"e in runningTimers\" :key=\"e.id\")\n          stopwatch-entry(:event=\"e\", :bucket_id=\"bucket_id\", :now=\"now\",\n            @delete=\"removeTimer\", @update=\"updateTimer\")\n          hr(style=\"margin: 0\")\n      div(v-else)\n        span(style=\"color: #555\") No stopwatch running\n        hr\n\n      div(v-if=\"stoppedTimers.length > 0\")\n        h3.mt-4.mb-4 History\n        div(v-for=\"k in Object.keys(timersByDate).sort().reverse()\")\n          h5.mt-2.mb-1 {{ k }}\n          div(v-for=\"e in timersByDate[k]\" :key=\"e.id\")\n            stopwatch-entry(:event=\"e\", :bucket_id=\"bucket_id\", :now=\"now\",\n              @delete=\"removeTimer\", @update=\"updateTimer\", @new=\"startTimer(e.data.label)\")\n            hr(style=\"margin: 0\")\n      div(v-else)\n        span(style=\"color: #555\") No history to show\n        hr\n</template>\n\n<style scoped lang=\"scss\">\n.btn {\n  margin-right: 0.5em;\n\n  .fa-icon {\n    margin-left: 0;\n    margin-right: 0.5em;\n  }\n}\n</style>\n\n<script>\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport StopwatchEntry from '../components/StopwatchEntry.vue';\nimport 'vue-awesome/icons/play';\nimport 'vue-awesome/icons/trash';\n\nexport default {\n  name: 'Stopwatch',\n  components: {\n    'stopwatch-entry': StopwatchEntry,\n  },\n  data: () => {\n    return {\n      bucket_id: 'aw-stopwatch',\n      events: [],\n      label: '',\n      now: moment(),\n    };\n  },\n  computed: {\n    runningTimers() {\n      return _.filter(this.events, e => e.data.running);\n    },\n    stoppedTimers() {\n      return _.filter(this.events, e => !e.data.running);\n    },\n    timersByDate() {\n      return _.groupBy(this.stoppedTimers, e => moment(e.timestamp).format('YYYY-MM-DD'));\n    },\n  },\n  mounted: function () {\n    // TODO: List all possible timer buckets\n    //this.getBuckets();\n\n    // Create default timer bucket\n    this.$aw.ensureBucket(this.bucket_id, 'general.stopwatch', 'unknown');\n\n    // TODO: Get all timer events\n    this.getEvents();\n\n    setInterval(() => (this.now = moment()), 1000);\n  },\n  methods: {\n    startTimer: async function (label) {\n      const event = await this.$aw.insertEvent(this.bucket_id, {\n        timestamp: new Date(),\n        data: {\n          running: true,\n          label: label,\n        },\n      });\n      this.events.unshift(event);\n    },\n\n    updateTimer: async function (new_event) {\n      const i = this.events.findIndex(e => e.id == new_event.id);\n      if (i != -1) {\n        // This is needed instead of this.events[i] because insides of arrays\n        // are not reactive in Vue\n        this.$set(this.events, i, new_event);\n      } else {\n        console.error(':(');\n      }\n    },\n\n    removeTimer: function (event) {\n      this.events = _.filter(this.events, e => e.id != event.id);\n    },\n\n    getEvents: async function () {\n      this.events = await this.$aw.getEvents(this.bucket_id, { limit: 100 });\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}