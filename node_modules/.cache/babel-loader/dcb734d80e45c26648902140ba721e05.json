{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/mixins/asyncErrorCaptured.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/mixins/asyncErrorCaptured.js","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2phc2thcmFuL2NvZGUvamFza2FyYW4vYWN0aXZpdHl3YXRjaC9hdy1zZXJ2ZXItcnVzdC9hdy13ZWJ1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CgpmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvciwgdm0sIGluZm8pIHsKICB2YXIgY3VyID0gdm07CgogIHdoaWxlIChjdXIgPSBjdXIuJHBhcmVudCkgewogICAgdmFyIGhvb2tzID0gY3VyLiRvcHRpb25zLmVycm9yQ2FwdHVyZWQgfHwgW107CgogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGhvb2tzKSwKICAgICAgICBfc3RlcDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciBob29rID0gX3N0ZXAudmFsdWU7CiAgICAgICAgaWYgKGhvb2suY2FsbChjdXIsIGVycm9yLCB2bSwgaW5mbykgPT09IGZhbHNlKSBicmVhazsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IuZigpOwogICAgfQogIH0KfQoKZXhwb3J0IGRlZmF1bHQgewogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHMgfHwge307CgogICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoa2V5KSB7CiAgICAgIHZhciBvcmlnaW5hbCA9IG1ldGhvZHNba2V5XTsKCiAgICAgIG1ldGhvZHNba2V5XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpOwoKICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiByZXN1bHRbImNhdGNoIl0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCB0aGF0LCBrZXkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSByZXR1cm4gcmVzdWx0OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHRoYXQsIGtleSk7CiAgICAgICAgfQogICAgICB9OwogICAgfTsKCiAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykgewogICAgICBfbG9vcChrZXkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/mixins/asyncErrorCaptured.js"],"names":["handleError","error","vm","info","cur","$parent","hooks","$options","errorCaptured","hook","call","beforeCreate","that","methods","key","original","args","result","apply","then","err","e"],"mappings":";;AAOA,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,EAA5B,EAAgCC,IAAhC,EAAsC;AACpC,MAAIC,GAAG,GAAGF,EAAV;;AACA,SAAQE,GAAG,GAAGA,GAAG,CAACC,OAAlB,EAA4B;AAC1B,QAAMC,KAAK,GAAGF,GAAG,CAACG,QAAJ,CAAaC,aAAb,IAA8B,EAA5C;;AAD0B,+CAEPF,KAFO;AAAA;;AAAA;AAE1B;AAAA,YAAWG,IAAX;AAA0B,YAAIA,IAAI,CAACC,IAAL,CAAUN,GAAV,EAAeH,KAAf,EAAsBC,EAAtB,EAA0BC,IAA1B,MAAoC,KAAxC,EAA+C;AAAzE;AAF0B;AAAA;AAAA;AAAA;AAAA;AAG3B;AACF;;AAED,eAAe;AACbQ,EAAAA,YAAY,EAAE,wBAAY;AACxB,QAAMC,IAAI,GAAG,IAAb;AACA,QAAMC,OAAO,GAAG,KAAKN,QAAL,CAAcM,OAAd,IAAyB,EAAzC;;AAFwB,+BAGbC,GAHa;AAItB,UAAMC,QAAQ,GAAGF,OAAO,CAACC,GAAD,CAAxB;;AACAD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAe,YAAmB;AAChC,YAAI;AAAA,4CADsBE,IACtB;AADsBA,YAAAA,IACtB;AAAA;;AACF,cAAMC,MAAM,GAAGF,QAAQ,CAACG,KAAT,CAAe,IAAf,EAAqBF,IAArB,CAAf;;AAEA,cAAIC,MAAM,IAAI,OAAOA,MAAM,CAACE,IAAd,KAAuB,UAAjC,IAA+C,OAAOF,MAAM,SAAb,KAAwB,UAA3E,EAAuF;AAErF,mBAAOA,MAAM,SAAN,CAAa,UAAUG,GAAV,EAAe;AACjCpB,cAAAA,WAAW,CAACoB,GAAD,EAAMR,IAAN,EAAYE,GAAZ,CAAX;AACD,aAFM,CAAP;AAGD,WALD,MAKO,OAAOG,MAAP;AACR,SATD,CASE,OAAOI,CAAP,EAAU;AACVrB,UAAAA,WAAW,CAACqB,CAAD,EAAIT,IAAJ,EAAUE,GAAV,CAAX;AACD;AACF,OAbD;AALsB;;AAGxB,SAAK,IAAMA,GAAX,IAAkBD,OAAlB,EAA2B;AAAA,YAAhBC,GAAgB;AAgB1B;AACF;AArBY,CAAf","sourcesContent":["// This mixin fixes following issue: errorHandler does not work with async component methods.\n// Fixing that issue is required for the ErrorBoundary component to work correctly.\n//\n// First I tried https://github.com/vuejs/vue/issues/7653\n// That didn't work, so I then tried: https://markeev.com/posts/vue-error-handling/\n// Which seems to work! (as long as you mark all functions as async and use await properly)\n\nfunction handleError(error, vm, info) {\n  let cur = vm;\n  while ((cur = cur.$parent)) {\n    const hooks = cur.$options.errorCaptured || [];\n    for (const hook of hooks) if (hook.call(cur, error, vm, info) === false) break;\n  }\n}\n\nexport default {\n  beforeCreate: function () {\n    const that = this;\n    const methods = this.$options.methods || {};\n    for (const key in methods) {\n      const original = methods[key];\n      methods[key] = function (...args) {\n        try {\n          const result = original.apply(this, args);\n          // let's analyse what is returned from the method\n          if (result && typeof result.then === 'function' && typeof result.catch === 'function') {\n            // this looks like a Promise. let's handle it's errors:\n            return result.catch(function (err) {\n              handleError(err, that, key);\n            });\n          } else return result;\n        } catch (e) {\n          handleError(e, that, key);\n        }\n      };\n    }\n  },\n};\n"]}]}