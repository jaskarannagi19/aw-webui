{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/util/tooltip.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/util/tooltip.js","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGgiOwppbXBvcnQgX2xhc3QgZnJvbSAibG9kYXNoL2xhc3QiOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCB7IHNlY29uZHNfdG9fZHVyYXRpb24gfSBmcm9tICcuL3RpbWUuanMnOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7CnZhciBzYW5pdGl6ZSA9IERPTVB1cmlmeS5zYW5pdGl6ZTsKZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkVG9vbHRpcChidWNrZXQsIGUpIHsKICB2YXIgaW5uZXIgPSAnVW5rbm93biBidWNrZXQgdHlwZSc7CgogIGlmIChidWNrZXQudHlwZSA9PSAnY3VycmVudHdpbmRvdycpIHsKICAgIGlubmVyID0gIlxuICAgICAgPHRyPjx0aD5BcHA6PC90aD48dGQ+Ii5jb25jYXQoc2FuaXRpemUoZS5kYXRhLmFwcCksICI8L3RkPjwvdHI+XG4gICAgICA8dHI+PHRoPlRpdGxlOjwvdGg+PHRkPiIpLmNvbmNhdChzYW5pdGl6ZShlLmRhdGEudGl0bGUpLCAiPC90ZD48L3RyPlxuICAgICAgIik7CiAgfSBlbHNlIGlmIChidWNrZXQudHlwZSA9PSAnd2ViLnRhYi5jdXJyZW50JykgewogICAgaW5uZXIgPSAiXG4gICAgICA8dHI+PHRoPlRpdGxlOjwvdGg+PHRkPiIuY29uY2F0KHNhbml0aXplKGUuZGF0YS50aXRsZSksICI8L3RkPjwvdHI+XG4gICAgICA8dHI+PHRoPlVSTDo8L3RoPjx0ZD48YSBocmVmPSIpLmNvbmNhdChzYW5pdGl6ZShlLmRhdGEudXJsKSwgIj4iKS5jb25jYXQoc2FuaXRpemUoZS5kYXRhLnVybCksICI8L2E+PC90ZD48L3RyPlxuICAgICAgIik7CiAgfSBlbHNlIGlmIChidWNrZXQudHlwZS5zdGFydHNXaXRoKCdhcHAuZWRpdG9yJykpIHsKICAgIGlubmVyID0gIlxuICAgICAgPHRyPjx0aD5GaWxlbmFtZTo8L3RoPjx0ZD4iLmNvbmNhdChzYW5pdGl6ZShfbGFzdChlLmRhdGEuZmlsZS5zcGxpdCgnLycpKSksICI8L3RkPjwvdHI+XG4gICAgICA8dHI+PHRoPlBhdGg6PC90aD48dGQ+IikuY29uY2F0KHNhbml0aXplKGUuZGF0YS5maWxlKSwgIjwvdGQ+PC90cj5cbiAgICAgIDx0cj48dGg+TGFuZ3VhZ2U6PC90aD48dGQ+IikuY29uY2F0KHNhbml0aXplKGUuZGF0YS5sYW5ndWFnZSksICI8L3RkPjwvdHI+XG4gICAgICAiKTsKICB9IGVsc2UgaWYgKGJ1Y2tldC50eXBlLnN0YXJ0c1dpdGgoJ2dlbmVyYWwuc3RvcHdhdGNoJykpIHsKICAgIGlubmVyID0gIlxuICAgICAgPHRyPjx0aD5MYWJlbDo8L3RoPjx0ZD4iLmNvbmNhdChzYW5pdGl6ZShlLmRhdGEubGFiZWwpLCAiPC90ZD48L3RyPlxuICAgICAgIik7CiAgfSBlbHNlIHsKICAgIGlubmVyID0gIlxuICAgICAgPHRyPjx0ZD5EYXRhOjwvdGQ+PHRkPiIuY29uY2F0KHNhbml0aXplKEpTT04uc3RyaW5naWZ5KGUuZGF0YSkpLCAiPC90ZD48L3RyPlxuICAgICAgIik7CiAgfQoKICByZXR1cm4gIjx0YWJsZT5cbiAgICA8dHI+PC90cj5cbiAgICA8dHI+PHRoPlN0YXJ0OjwvdGg+PHRkPiIuY29uY2F0KG1vbWVudChlLnRpbWVzdGFtcCkuZm9ybWF0KCksICI8L3RkPjwvdHI+XG4gICAgPHRyPjx0aD5TdG9wOjwvdGg+PHRkPiIpLmNvbmNhdChtb21lbnQoZS50aW1lc3RhbXApLmFkZChlLmR1cmF0aW9uLCAnc2Vjb25kcycpLmZvcm1hdCgpLCAiPC90ZD48L3RyPlxuICAgIDx0cj48dGg+RHVyYXRpb246PC90aD48dGQ+IikuY29uY2F0KHNlY29uZHNfdG9fZHVyYXRpb24oZS5kdXJhdGlvbiksICI8L3RkPjwvdHI+XG4gICAgIikuY29uY2F0KGlubmVyLCAiXG4gICAgPC90YWJsZT4iKTsKfQ=="},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/util/tooltip.js"],"names":["moment","seconds_to_duration","DOMPurify","sanitize","buildTooltip","bucket","e","inner","type","data","app","title","url","startsWith","file","split","language","label","JSON","stringify","timestamp","format","add","duration"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,mBAAT,QAAoC,WAApC;AACA,OAAOC,SAAP,MAAsB,WAAtB;AAGA,IAAMC,QAAQ,GAAGD,SAAS,CAACC,QAA3B;AAEA,OAAO,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,CAA9B,EAAiC;AAGtC,MAAIC,KAAK,GAAG,qBAAZ;;AACA,MAAIF,MAAM,CAACG,IAAP,IAAe,eAAnB,EAAoC;AAClCD,IAAAA,KAAK,0CACoBJ,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOC,GAAR,CAD5B,sDAEsBP,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOE,KAAR,CAF9B,uBAAL;AAID,GALD,MAKO,IAAIN,MAAM,CAACG,IAAP,IAAe,iBAAnB,EAAsC;AAC3CD,IAAAA,KAAK,4CACsBJ,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOE,KAAR,CAD9B,4DAE4BR,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOG,GAAR,CAFpC,cAEoDT,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOG,GAAR,CAF5D,2BAAL;AAID,GALM,MAKA,IAAIP,MAAM,CAACG,IAAP,CAAYK,UAAZ,CAAuB,YAAvB,CAAJ,EAA0C;AAC/CN,IAAAA,KAAK,+CACyBJ,QAAQ,CAAC,MAAOG,CAAC,CAACG,IAAF,CAAOK,IAAP,CAAYC,KAAZ,CAAkB,GAAlB,CAAP,CAAD,CADjC,qDAEqBZ,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOK,IAAR,CAF7B,yDAGyBX,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOO,QAAR,CAHjC,uBAAL;AAKD,GANM,MAMA,IAAIX,MAAM,CAACG,IAAP,CAAYK,UAAZ,CAAuB,mBAAvB,CAAJ,EAAiD;AACtDN,IAAAA,KAAK,4CACsBJ,QAAQ,CAACG,CAAC,CAACG,IAAF,CAAOQ,KAAR,CAD9B,uBAAL;AAGD,GAJM,MAIA;AACLV,IAAAA,KAAK,2CACqBJ,QAAQ,CAACe,IAAI,CAACC,SAAL,CAAeb,CAAC,CAACG,IAAjB,CAAD,CAD7B,uBAAL;AAGD;;AACD,sEAE2BT,MAAM,CAACM,CAAC,CAACc,SAAH,CAAN,CAAoBC,MAApB,EAF3B,mDAG0BrB,MAAM,CAACM,CAAC,CAACc,SAAH,CAAN,CAAoBE,GAApB,CAAwBhB,CAAC,CAACiB,QAA1B,EAAoC,SAApC,EAA+CF,MAA/C,EAH1B,uDAI8BpB,mBAAmB,CAACK,CAAC,CAACiB,QAAH,CAJjD,6BAKIhB,KALJ;AAOD","sourcesContent":["import moment from 'moment';\nimport { seconds_to_duration } from './time.js';\nimport DOMPurify from 'dompurify';\nimport _ from 'lodash';\n\nconst sanitize = DOMPurify.sanitize;\n\nexport function buildTooltip(bucket, e) {\n  // WARNING: XSS risk, make sure to sanitize properly\n  // FIXME: Not actually tested against XSS attacks, implementation needs to be verified in tests.\n  let inner = 'Unknown bucket type';\n  if (bucket.type == 'currentwindow') {\n    inner = `\n      <tr><th>App:</th><td>${sanitize(e.data.app)}</td></tr>\n      <tr><th>Title:</th><td>${sanitize(e.data.title)}</td></tr>\n      `;\n  } else if (bucket.type == 'web.tab.current') {\n    inner = `\n      <tr><th>Title:</th><td>${sanitize(e.data.title)}</td></tr>\n      <tr><th>URL:</th><td><a href=${sanitize(e.data.url)}>${sanitize(e.data.url)}</a></td></tr>\n      `;\n  } else if (bucket.type.startsWith('app.editor')) {\n    inner = `\n      <tr><th>Filename:</th><td>${sanitize(_.last(e.data.file.split('/')))}</td></tr>\n      <tr><th>Path:</th><td>${sanitize(e.data.file)}</td></tr>\n      <tr><th>Language:</th><td>${sanitize(e.data.language)}</td></tr>\n      `;\n  } else if (bucket.type.startsWith('general.stopwatch')) {\n    inner = `\n      <tr><th>Label:</th><td>${sanitize(e.data.label)}</td></tr>\n      `;\n  } else {\n    inner = `\n      <tr><td>Data:</td><td>${sanitize(JSON.stringify(e.data))}</td></tr>\n      `;\n  }\n  return `<table>\n    <tr></tr>\n    <tr><th>Start:</th><td>${moment(e.timestamp).format()}</td></tr>\n    <tr><th>Stop:</th><td>${moment(e.timestamp).add(e.duration, 'seconds').format()}</td></tr>\n    <tr><th>Duration:</th><td>${seconds_to_duration(e.duration)}</td></tr>\n    ${inner}\n    </table>`;\n}\n"]}]}