{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/store/modules/categories.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/store/modules/categories.js","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9qYXNrYXJhbi9jb2RlL2phc2thcmFuL2FjdGl2aXR5d2F0Y2gvYXctc2VydmVyLXJ1c3QvYXctd2VidWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX21hcCBmcm9tICJsb2Rhc2gvbWFwIjsKaW1wb3J0IF9tYXggZnJvbSAibG9kYXNoL21heCI7CmltcG9ydCBfaXNFcXVhbCBmcm9tICJsb2Rhc2gvaXNFcXVhbCI7CmltcG9ydCBfZmxhdHRlbiBmcm9tICJsb2Rhc2gvZmxhdHRlbiI7CmltcG9ydCBfdW5pcUJ5IGZyb20gImxvZGFzaC91bmlxQnkiOwppbXBvcnQgX3NvcnRCeSBmcm9tICJsb2Rhc2gvc29ydEJ5IjsKaW1wb3J0IF9jbG9uZURlZXAgZnJvbSAibG9kYXNoL2Nsb25lRGVlcCI7CmltcG9ydCB7IHNhdmVDbGFzc2VzLCBsb2FkQ2xhc3NlcywgZGVmYXVsdENhdGVnb3JpZXMsIGJ1aWxkX2NhdGVnb3J5X2hpZXJhcmNoeSwgY3JlYXRlTWlzc2luZ1BhcmVudHMgfSBmcm9tICd+L3V0aWwvY2xhc3Nlcyc7CnZhciBfc3RhdGUgPSB7CiAgY2xhc3NlczogW10sCiAgY2xhc3Nlc191bnNhdmVkX2NoYW5nZXM6IGZhbHNlCn07CnZhciBnZXR0ZXJzID0gewogIGNsYXNzZXNfaGllcmFyY2h5OiBmdW5jdGlvbiBjbGFzc2VzX2hpZXJhcmNoeShzdGF0ZSkgewogICAgdmFyIGhpZXIgPSBidWlsZF9jYXRlZ29yeV9oaWVyYXJjaHkoX2Nsb25lRGVlcChzdGF0ZS5jbGFzc2VzKSk7CiAgICByZXR1cm4gX3NvcnRCeShoaWVyLCBbZnVuY3Rpb24gKGMpIHsKICAgICAgcmV0dXJuIGMuaWQgfHwgMDsKICAgIH1dKTsKICB9LAogIGFsbF9jYXRlZ29yaWVzOiBmdW5jdGlvbiBhbGxfY2F0ZWdvcmllcyhzdGF0ZSkgewogICAgcmV0dXJuIF91bmlxQnkoX2ZsYXR0ZW4oc3RhdGUuY2xhc3Nlcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgdmFyIGwgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGMubmFtZS5sZW5ndGg7IGkrKykgewogICAgICAgIGwucHVzaChjLm5hbWUuc2xpY2UoMCwgaSkpOwogICAgICB9CgogICAgICByZXR1cm4gbDsKICAgIH0pKSwgZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIHYuam9pbignPj4+PicpOwogICAgfSk7CiAgfSwKICBnZXRfY2F0ZWdvcnk6IGZ1bmN0aW9uIGdldF9jYXRlZ29yeShzdGF0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChjYXRlZ29yeV9hcnIpIHsKICAgICAgcmV0dXJuIHN0YXRlLmNsYXNzZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBfaXNFcXVhbChjLm5hbWUsIGNhdGVnb3J5X2Fycik7CiAgICAgIH0pOwogICAgfTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoX3JlZikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IGNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gbG9hZENsYXNzZXMoKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgKDAsIF9jb250ZXh0LnQwKSgnbG9hZENsYXNzZXMnLCBfY29udGV4dC50MSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBzYXZlOiBmdW5jdGlvbiBzYXZlKF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCByOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHNhdmVDbGFzc2VzKHN0YXRlLmNsYXNzZXMpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHIgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ3NhdmVDb21wbGV0ZWQnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcik7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgbG9hZENsYXNzZXM6IGZ1bmN0aW9uIGxvYWRDbGFzc2VzKHN0YXRlLCBjbGFzc2VzKSB7CiAgICBjbGFzc2VzID0gY3JlYXRlTWlzc2luZ1BhcmVudHMoY2xhc3Nlcyk7CiAgICB2YXIgaSA9IDA7CiAgICBzdGF0ZS5jbGFzc2VzID0gY2xhc3Nlcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYywgewogICAgICAgIGlkOiBpKysKICAgICAgfSk7CiAgICB9KTsKICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgY2xhc3NlczonLCBzdGF0ZS5jbGFzc2VzKTsKICAgIHN0YXRlLmNsYXNzZXNfdW5zYXZlZF9jaGFuZ2VzID0gZmFsc2U7CiAgfSwKICAiaW1wb3J0IjogZnVuY3Rpb24gX2ltcG9ydChzdGF0ZSwgY2xhc3NlcykgewogICAgdmFyIGkgPSAwOwogICAgc3RhdGUuY2xhc3NlcyA9IGNsYXNzZXMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGMsIHsKICAgICAgICBpZDogaSsrCiAgICAgIH0pOwogICAgfSk7CiAgICBjb25zb2xlLmxvZygnTG9hZGVkIGNsYXNzZXM6Jywgc3RhdGUuY2xhc3Nlcyk7CiAgICBzdGF0ZS5jbGFzc2VzX3Vuc2F2ZWRfY2hhbmdlcyA9IHRydWU7CiAgfSwKICB1cGRhdGVDbGFzczogZnVuY3Rpb24gdXBkYXRlQ2xhc3Moc3RhdGUsIG5ld19jbGFzcykgewogICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIGNsYXNzOicsIG5ld19jbGFzcyk7CgogICAgdmFyIG9sZF9jbGFzcyA9IF9jbG9uZURlZXAoc3RhdGUuY2xhc3Nlc1tuZXdfY2xhc3MuaWRdKTsKCiAgICBpZiAobmV3X2NsYXNzLmlkID09PSB1bmRlZmluZWQgfHwgbmV3X2NsYXNzLmlkID09PSBudWxsKSB7CiAgICAgIG5ld19jbGFzcy5pZCA9IF9tYXgoX21hcChzdGF0ZS5jbGFzc2VzLCAnaWQnKSkgKyAxOwogICAgICBzdGF0ZS5jbGFzc2VzLnB1c2gobmV3X2NsYXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIE9iamVjdC5hc3NpZ24oc3RhdGUuY2xhc3Nlc1tuZXdfY2xhc3MuaWRdLCBuZXdfY2xhc3MpOwogICAgfQoKICAgIHZhciBwYXJlbnRfZGVwdGggPSBvbGRfY2xhc3MubmFtZS5sZW5ndGg7CgogICAgX21hcChzdGF0ZS5jbGFzc2VzLCBmdW5jdGlvbiAoYykgewogICAgICBpZiAoX2lzRXF1YWwob2xkX2NsYXNzLm5hbWUsIGMubmFtZS5zbGljZSgwLCBwYXJlbnRfZGVwdGgpKSkgewogICAgICAgIGMubmFtZSA9IG5ld19jbGFzcy5uYW1lLmNvbmNhdChjLm5hbWUuc2xpY2UocGFyZW50X2RlcHRoKSk7CiAgICAgICAgY29uc29sZS5sb2coJ1JlbmFtZWQgY2hpbGQ6JywgYy5uYW1lKTsKICAgICAgfQogICAgfSk7CgogICAgc3RhdGUuY2xhc3Nlc191bnNhdmVkX2NoYW5nZXMgPSB0cnVlOwogIH0sCiAgYWRkQ2xhc3M6IGZ1bmN0aW9uIGFkZENsYXNzKHN0YXRlLCBuZXdfY2xhc3MpIHsKICAgIG5ld19jbGFzcy5pZCA9IF9tYXgoX21hcChzdGF0ZS5jbGFzc2VzLCAnaWQnKSkgKyAxOwogICAgc3RhdGUuY2xhc3Nlcy5wdXNoKG5ld19jbGFzcyk7CiAgICBzdGF0ZS5jbGFzc2VzX3Vuc2F2ZWRfY2hhbmdlcyA9IHRydWU7CiAgfSwKICByZW1vdmVDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3Moc3RhdGUsIGNscykgewogICAgc3RhdGUuY2xhc3NlcyA9IHN0YXRlLmNsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgIHJldHVybiBjLmlkICE9PSBjbHMuaWQ7CiAgICB9KTsKICAgIHN0YXRlLmNsYXNzZXNfdW5zYXZlZF9jaGFuZ2VzID0gdHJ1ZTsKICB9LAogIHJlc3RvcmVEZWZhdWx0Q2xhc3NlczogZnVuY3Rpb24gcmVzdG9yZURlZmF1bHRDbGFzc2VzKHN0YXRlKSB7CiAgICB2YXIgaSA9IDA7CiAgICBzdGF0ZS5jbGFzc2VzID0gY3JlYXRlTWlzc2luZ1BhcmVudHMoZGVmYXVsdENhdGVnb3JpZXMpLm1hcChmdW5jdGlvbiAoYykgewogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjLCB7CiAgICAgICAgaWQ6IGkrKwogICAgICB9KTsKICAgIH0pOwogICAgc3RhdGUuY2xhc3Nlc191bnNhdmVkX2NoYW5nZXMgPSB0cnVlOwogIH0sCiAgY2xlYXJBbGw6IGZ1bmN0aW9uIGNsZWFyQWxsKHN0YXRlKSB7CiAgICBzdGF0ZS5jbGFzc2VzID0gW107CiAgICBzdGF0ZS5jbGFzc2VzX3Vuc2F2ZWRfY2hhbmdlcyA9IHRydWU7CiAgfSwKICBzYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBzYXZlQ29tcGxldGVkKHN0YXRlKSB7CiAgICBzdGF0ZS5jbGFzc2VzX3Vuc2F2ZWRfY2hhbmdlcyA9IGZhbHNlOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IF9zdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/store/modules/categories.js"],"names":["saveClasses","loadClasses","defaultCategories","build_category_hierarchy","createMissingParents","_state","classes","classes_unsaved_changes","getters","classes_hierarchy","state","hier","c","id","all_categories","map","l","i","name","length","push","slice","v","join","get_category","category_arr","find","actions","load","commit","save","r","mutations","Object","assign","console","log","updateClass","new_class","old_class","undefined","parent_depth","concat","addClass","removeClass","cls","filter","restoreDefaultClasses","clearAll","saveCompleted","namespaced"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport {\n  saveClasses,\n  loadClasses,\n  defaultCategories,\n  build_category_hierarchy,\n  createMissingParents,\n} from '~/util/classes';\n\n// initial state\nconst _state = {\n  classes: [],\n  classes_unsaved_changes: false,\n};\n\n// getters\nconst getters = {\n  classes_hierarchy: state => {\n    const hier = build_category_hierarchy(_.cloneDeep(state.classes));\n    return _.sortBy(hier, [c => c.id || 0]);\n  },\n  all_categories: state => {\n    // Returns a list of category names (a list of list of strings)\n    return _.uniqBy(\n      _.flatten(\n        state.classes.map(c => {\n          const l = [];\n          for (let i = 1; i <= c.name.length; i++) {\n            l.push(c.name.slice(0, i));\n          }\n          return l;\n        })\n      ),\n      v => v.join('>>>>') // Can be any separator that doesn't appear in the category names themselves\n    );\n  },\n  get_category: state => category_arr => {\n    return state.classes.find(c => _.isEqual(c.name, category_arr));\n  },\n};\n\n// actions\nconst actions = {\n  async load({ commit }) {\n    commit('loadClasses', await loadClasses());\n  },\n  async save({ state, commit }) {\n    const r = await saveClasses(state.classes);\n    commit('saveCompleted');\n    return r;\n  },\n};\n\n// mutations\nconst mutations = {\n  loadClasses(state, classes) {\n    classes = createMissingParents(classes);\n\n    let i = 0;\n    state.classes = classes.map(c => Object.assign(c, { id: i++ }));\n    console.log('Loaded classes:', state.classes);\n    state.classes_unsaved_changes = false;\n  },\n  import(state, classes) {\n    let i = 0;\n    // overwrite id even if already set\n    state.classes = classes.map(c => Object.assign(c, { id: i++ }));\n    console.log('Loaded classes:', state.classes);\n    state.classes_unsaved_changes = true;\n  },\n  updateClass(state, new_class) {\n    console.log('Updating class:', new_class);\n    const old_class = _.cloneDeep(state.classes[new_class.id]);\n\n    if (new_class.id === undefined || new_class.id === null) {\n      new_class.id = _.max(_.map(state.classes, 'id')) + 1;\n      state.classes.push(new_class);\n    } else {\n      Object.assign(state.classes[new_class.id], new_class);\n    }\n\n    // When a parent category is renamed, we also need to rename the children\n    const parent_depth = old_class.name.length;\n    _.map(state.classes, c => {\n      if (_.isEqual(old_class.name, c.name.slice(0, parent_depth))) {\n        c.name = new_class.name.concat(c.name.slice(parent_depth));\n        console.log('Renamed child:', c.name);\n      }\n    });\n\n    state.classes_unsaved_changes = true;\n  },\n  addClass(state, new_class) {\n    new_class.id = _.max(_.map(state.classes, 'id')) + 1;\n    state.classes.push(new_class);\n    state.classes_unsaved_changes = true;\n  },\n  removeClass(state, cls) {\n    state.classes = state.classes.filter(c => c.id !== cls.id);\n    state.classes_unsaved_changes = true;\n  },\n  restoreDefaultClasses(state) {\n    let i = 0;\n    state.classes = createMissingParents(defaultCategories).map(c => Object.assign(c, { id: i++ }));\n    state.classes_unsaved_changes = true;\n  },\n  clearAll(state) {\n    state.classes = [];\n    state.classes_unsaved_changes = true;\n  },\n  saveCompleted(state) {\n    state.classes_unsaved_changes = false;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters,\n  actions,\n  mutations,\n};\n"]}]}