{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/components/InputTimeInterval.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/components/InputTimeInterval.vue","mtime":1622830085270},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2lucHV0LXRpbWVpbnRlcnZhbCcsCiAgcHJvcHM6IHsKICAgIGRlZmF1bHREdXJhdGlvbjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICJkZWZhdWx0IjogNjAgKiA2MAogICAgfSwKICAgIG1heER1cmF0aW9uOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgImRlZmF1bHQiOiBudWxsCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHVyYXRpb246IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kZWZhdWx0RHVyYXRpb24pKSwKICAgICAgbW9kZTogJ2xhc3RfZHVyYXRpb24nLAogICAgICBzdGFydDogbnVsbCwKICAgICAgZW5kOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZhbHVlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIGlmICh0aGlzLm1vZGUgPT0gJ3JhbmdlJyAmJiB0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7CiAgICAgICAgICByZXR1cm4gW21vbWVudCh0aGlzLnN0YXJ0KSwgbW9tZW50KHRoaXMuZW5kKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBbbW9tZW50KCkuc3VidHJhY3QodGhpcy5kdXJhdGlvbiwgJ3NlY29uZHMnKSwgbW9tZW50KCldOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGVtcHR5RGF0ZXJhbmdlOiBmdW5jdGlvbiBlbXB0eURhdGVyYW5nZSgpIHsKICAgICAgcmV0dXJuICEodGhpcy5zdGFydCAmJiB0aGlzLmVuZCk7CiAgICB9LAogICAgaW52YWxpZERhdGVyYW5nZTogZnVuY3Rpb24gaW52YWxpZERhdGVyYW5nZSgpIHsKICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLnN0YXJ0KSA+PSBtb21lbnQodGhpcy5lbmQpOwogICAgfSwKICAgIGRhdGVyYW5nZVRvb0xvbmc6IGZ1bmN0aW9uIGRhdGVyYW5nZVRvb0xvbmcoKSB7CiAgICAgIHJldHVybiBtb21lbnQodGhpcy5zdGFydCkuYWRkKHRoaXMubWF4RHVyYXRpb24sICdzZWNvbmRzJykuaXNCZWZvcmUobW9tZW50KHRoaXMuZW5kKSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy52YWx1ZUNoYW5nZWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbHVlQ2hhbmdlZDogZnVuY3Rpb24gdmFsdWVDaGFuZ2VkKCkgewogICAgICBpZiAodGhpcy5tb2RlID09ICdsYXN0X2R1cmF0aW9uJyB8fCAhdGhpcy5lbXB0eURhdGVyYW5nZSAmJiAhdGhpcy5pbnZhbGlkRGF0ZXJhbmdlICYmICF0aGlzLmRhdGVyYW5nZVRvb0xvbmcpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMudmFsdWUpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["InputTimeInterval.vue"],"names":[],"mappings":";AA8CA,OAAA,MAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,iBAAA,KAAA;AAFA,KADA;AAKA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,iBAAA;AAFA;AALA,GAFA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,eAAA,CAAA,CADA;AAEA,MAAA,IAAA,EAAA,eAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,GAAA,EAAA;AAJA,KAAA;AAMA,GAnBA;AAoBA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,YAAA,KAAA,IAAA,IAAA,OAAA,IAAA,KAAA,KAAA,IAAA,KAAA,GAAA,EAAA;AACA,iBAAA,CAAA,MAAA,CAAA,KAAA,KAAA,CAAA,EAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,iBAAA,CAAA,MAAA,GAAA,QAAA,CAAA,KAAA,QAAA,EAAA,SAAA,CAAA,EAAA,MAAA,EAAA,CAAA;AACA;AACA;AAPA,KADA;AAUA,IAAA,cAVA,4BAUA;AACA,aAAA,EAAA,KAAA,KAAA,IAAA,KAAA,GAAA,CAAA;AACA,KAZA;AAaA,IAAA,gBAbA,8BAaA;AACA,aAAA,MAAA,CAAA,KAAA,KAAA,CAAA,IAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AACA,KAfA;AAgBA,IAAA,gBAhBA,8BAgBA;AACA,aAAA,MAAA,CAAA,KAAA,KAAA,CAAA,CAAA,GAAA,CAAA,KAAA,WAAA,EAAA,SAAA,EAAA,QAAA,CAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA;AAlBA,GApBA;AAwCA,EAAA,OAxCA,qBAwCA;AACA,SAAA,YAAA;AACA,GA1CA;AA2CA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,UACA,KAAA,IAAA,IAAA,eAAA,IACA,CAAA,KAAA,cAAA,IAAA,CAAA,KAAA,gBAAA,IAAA,CAAA,KAAA,gBAFA,EAGA;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,KAAA,KAAA;AACA;AACA;AARA;AA3CA,CAAA","sourcesContent":["<template lang=\"pug\">\ndiv\n  div\n    b-alert(v-if=\"mode == 'range' && invalidDaterange\", variant=\"warning\", show)\n      | The selected date range is invalid. The second date must be greater than the first date.\n    b-alert(v-if=\"mode == 'range' && daterangeTooLong\", variant=\"warning\", show)\n      | The selected date range is too long. The maximum is {{ maxDuration/(24*60*60) }} days.\n\n    table\n      tr\n        th.pr-2\n          label(for=\"mode\") Interval mode:\n        td\n          select(id=\"mode\", v-model=\"mode\")\n            option(value='last_duration') Last duration\n            option(value='range') Date range\n      tr(v-if=\"mode == 'last_duration'\")\n        th.pr-2\n          label(for=\"duration\") Show last:\n        td\n          select(id=\"duration\", v-model=\"duration\", @change=\"valueChanged\")\n            option(:value=\"15*60\") 15min\n            option(:value=\"30*60\") 30min\n            option(:value=\"60*60\") 1h\n            option(:value=\"2*60*60\") 2h\n            option(:value=\"4*60*60\") 4h\n            option(:value=\"6*60*60\") 6h\n            option(:value=\"12*60*60\") 12h\n            option(:value=\"24*60*60\") 24h\n      tr(v-if=\"mode == 'range'\")\n        th.pr-2 Range:\n        td\n          input(type=\"date\", v-model=\"start\")\n          input(type=\"date\", v-model=\"end\")\n          button(\n            class=\"btn btn-outline-dark btn-sm\",\n            type=\"button\", \n            :disabled=\"mode == 'range' && (invalidDaterange || emptyDaterange || daterangeTooLong)\",\n            @click=\"valueChanged\"\n          ) Update\n\n</template>\n\n<style scoped lang=\"scss\"></style>\n\n<script>\nimport moment from 'moment';\nexport default {\n  name: 'input-timeinterval',\n  props: {\n    defaultDuration: {\n      type: Number,\n      default: 60 * 60,\n    },\n    maxDuration: {\n      type: Number,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      duration: JSON.parse(JSON.stringify(this.defaultDuration)), // Make a copy of defaultDuration\n      mode: 'last_duration',\n      start: null,\n      end: null,\n    };\n  },\n  computed: {\n    value: {\n      get() {\n        if (this.mode == 'range' && this.start && this.end) {\n          return [moment(this.start), moment(this.end)];\n        } else {\n          return [moment().subtract(this.duration, 'seconds'), moment()];\n        }\n      },\n    },\n    emptyDaterange() {\n      return !(this.start && this.end);\n    },\n    invalidDaterange() {\n      return moment(this.start) >= moment(this.end);\n    },\n    daterangeTooLong() {\n      return moment(this.start).add(this.maxDuration, 'seconds').isBefore(moment(this.end));\n    },\n  },\n  mounted() {\n    this.valueChanged();\n  },\n  methods: {\n    valueChanged() {\n      if (\n        this.mode == 'last_duration' ||\n        (!this.emptyDaterange && !this.invalidDaterange && !this.daterangeTooLong)\n      ) {\n        this.$emit('input', this.value);\n      }\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}