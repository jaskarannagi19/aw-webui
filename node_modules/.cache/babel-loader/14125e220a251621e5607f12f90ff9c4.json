{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/eslint-loader/index.js??ref--12-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/visualizations/summary.js","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/visualizations/summary.js","mtime":1622212604097},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Cgp2YXIgZDMgPSByZXF1aXJlKCdkMycpOwoKdmFyIENvbG9yID0gcmVxdWlyZSgnY29sb3InKTsKCnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7CgppbXBvcnQgeyBnZXRDYXRlZ29yeUNvbG9yRnJvbVN0cmluZyB9IGZyb20gJy4uL3V0aWwvY29sb3InOwppbXBvcnQgeyBzZWNvbmRzX3RvX2R1cmF0aW9uIH0gZnJvbSAnLi4vdXRpbC90aW1lLmpzJzsKCmZ1bmN0aW9uIGNyZWF0ZShjb250YWluZXIpIHsKICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChjb250YWluZXIpLmFwcGVuZCgnc3ZnJyk7CiAgc3ZnLmF0dHIoJ3dpZHRoJywgJzEwMCUnKS5hdHRyKCdoZWlnaHQnLCAnMTAwcHgnKS5hdHRyKCdjbGFzcycsICdhcHBzdW1tYXJ5Jyk7Cn0KCmZ1bmN0aW9uIHNldF9zdGF0dXMoY29udGFpbmVyLCBtc2cpIHsKICB2YXIgc3ZnX2VsZW0gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmFwcHN1bW1hcnknKTsKICB2YXIgc3ZnID0gZDMuc2VsZWN0KHN2Z19lbGVtKTsKICBzdmdfZWxlbS5pbm5lckhUTUwgPSAnJzsKICBzdmcuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsICcwcHgnKS5hdHRyKCd5JywgJzI1cHgnKS50ZXh0KG1zZykuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpLmF0dHIoJ2ZvbnQtc2l6ZScsICcyNXB4JykuYXR0cignZmlsbCcsICdibGFjaycpOwp9CgpmdW5jdGlvbiB1cGRhdGUoY29udGFpbmVyLCBhcHBzKSB7CiAgaWYgKGFwcHMubGVuZ3RoIDw9IDApIHsKICAgIHNldF9zdGF0dXMoY29udGFpbmVyLCAnTm8gZGF0YScpOwogICAgcmV0dXJuIGNvbnRhaW5lcjsKICB9CgogIHZhciBzdmdfZWxlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYXBwc3VtbWFyeScpOwogIHN2Z19lbGVtLmlubmVySFRNTCA9ICcnOwogIHZhciBzdmcgPSBkMy5zZWxlY3Qoc3ZnX2VsZW0pOwogIGFwcHMgPSBhcHBzLmZpbHRlcihmdW5jdGlvbiAoYXBwKSB7CiAgICByZXR1cm4gYXBwLmR1cmF0aW9uICE9PSB1bmRlZmluZWQ7CiAgfSk7CiAgdmFyIGN1cnJfeSA9IDA7CiAgdmFyIGxvbmdlc3RfZHVyYXRpb24gPSBhcHBzWzBdLmR1cmF0aW9uOwoKICBfLmVhY2goYXBwcywgZnVuY3Rpb24gKGFwcCwgaSkgewogICAgdmFyIHdpZHRoID0gYXBwLmR1cmF0aW9uIC8gbG9uZ2VzdF9kdXJhdGlvbiAqIDEwMCArICclJzsKICAgIHZhciBiYXJIZWlnaHQgPSA1MDsKICAgIHZhciB0ZXh0U2l6ZSA9IDE1OwogICAgdmFyIGFwcGNvbG9yID0gYXBwLmNvbG9yIHx8IGdldENhdGVnb3J5Q29sb3JGcm9tU3RyaW5nKGFwcC5jb2xvcktleSB8fCBhcHAubmFtZSk7CiAgICB2YXIgaG92ZXJjb2xvciA9IENvbG9yKGFwcGNvbG9yKS5kYXJrZW4oMC4xKS5oZXgoKTsKICAgIHZhciBlZyA9IHN2Zy5hcHBlbmQoJ2cnKTsKICAgIGVnLmF0dHIoJ2lkJywgJ3N1bW1hcnlfYXBwXycgKyBpKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkgewogICAgICBlZy5zZWxlY3QoJ3JlY3QnKS5zdHlsZSgnZmlsbCcsIGhvdmVyY29sb3IpOwogICAgfSkub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICBlZy5zZWxlY3QoJ3JlY3QnKS5zdHlsZSgnZmlsbCcsIGFwcGNvbG9yKTsKICAgIH0pOwogICAgZWcuYXBwZW5kKCd0aXRsZScpLnRleHQoYXBwLmhvdmVydGV4dCArICdcbicgKyBzZWNvbmRzX3RvX2R1cmF0aW9uKGFwcC5kdXJhdGlvbikpOwogICAgZWcuYXBwZW5kKCdyZWN0JykuYXR0cigneCcsIDApLmF0dHIoJ3knLCBjdXJyX3kpLmF0dHIoJ3J4JywgNSkuYXR0cigncnknLCA1KS5hdHRyKCd3aWR0aCcsIHdpZHRoKS5hdHRyKCdoZWlnaHQnLCBiYXJIZWlnaHQpLnN0eWxlKCdmaWxsJywgYXBwY29sb3IpOwogICAgZWcuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsIDUpLmF0dHIoJ3knLCBjdXJyX3kgKyA1ICsgdGV4dFNpemUpLnRleHQoYXBwLm5hbWUpLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKS5hdHRyKCdmb250LXNpemUnLCB0ZXh0U2l6ZSArICdweCcpLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKTsKICAgIGVnLmFwcGVuZCgndGV4dCcpLmF0dHIoJ3gnLCA1KS5hdHRyKCd5JywgY3Vycl95ICsgNSArIHRleHRTaXplICsgNSArIHRleHRTaXplKS50ZXh0KHNlY29uZHNfdG9fZHVyYXRpb24oYXBwLmR1cmF0aW9uKSkuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpLmF0dHIoJ2ZvbnQtc2l6ZScsIHRleHRTaXplICsgJ3B4JykuYXR0cignZmlsbCcsICdibGFjaycpOwogICAgY3Vycl95ICs9IGJhckhlaWdodCArIDU7CiAgfSk7CgogIGN1cnJfeSAtPSA1OwogIHN2Zy5hdHRyKCdoZWlnaHQnLCBjdXJyX3kpOwogIHJldHVybiBjb250YWluZXI7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVN1bW1lZEV2ZW50cyhjb250YWluZXIsIHN1bW1lZEV2ZW50cywgdGl0bGVLZXlGdW5jLCBob3ZlcktleUZ1bmMsIGNvbG9yS2V5RnVuYykgewogIGlmIChob3ZlcktleUZ1bmMgPT0gbnVsbCkgewogICAgaG92ZXJLZXlGdW5jID0gdGl0bGVLZXlGdW5jOwogIH0KCiAgdmFyIGFwcHMgPSBfLm1hcChzdW1tZWRFdmVudHMsIGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB0aXRsZUtleUZ1bmMoZSksCiAgICAgIGhvdmVydGV4dDogaG92ZXJLZXlGdW5jKGUpLAogICAgICBkdXJhdGlvbjogZS5kdXJhdGlvbiwKICAgICAgY29sb3I6IGUuZGF0YVsnJGNvbG9yJ10sCiAgICAgIGNvbG9yS2V5OiBjb2xvcktleUZ1bmMoZSkKICAgIH07CiAgfSk7CgogIHVwZGF0ZShjb250YWluZXIsIGFwcHMpOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgY3JlYXRlOiBjcmVhdGUsCiAgdXBkYXRlOiB1cGRhdGUsCiAgdXBkYXRlU3VtbWVkRXZlbnRzOiB1cGRhdGVTdW1tZWRFdmVudHMsCiAgc2V0X3N0YXR1czogc2V0X3N0YXR1cwp9Ow=="},{"version":3,"sources":["/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/visualizations/summary.js"],"names":["d3","require","Color","_","getCategoryColorFromString","seconds_to_duration","create","container","innerHTML","svg","select","append","attr","set_status","msg","svg_elem","querySelector","text","update","apps","length","filter","app","duration","undefined","curr_y","longest_duration","each","i","width","barHeight","textSize","appcolor","color","colorKey","name","hovercolor","darken","hex","eg","on","style","hovertext","updateSummedEvents","summedEvents","titleKeyFunc","hoverKeyFunc","colorKeyFunc","map","e","data"],"mappings":"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","sourcesContent":["'use strict';\n\nconst d3 = require('d3');\nconst Color = require('color');\nconst _ = require('lodash');\n\nimport { getCategoryColorFromString } from '../util/color';\n\nimport { seconds_to_duration } from '../util/time.js';\n\nfunction create(container) {\n  // Clear element\n  container.innerHTML = '';\n\n  // Create svg canvas\n  const svg = d3.select(container).append('svg');\n  svg.attr('width', '100%').attr('height', '100px').attr('class', 'appsummary');\n}\n\nfunction set_status(container, msg) {\n  // Select svg canvas\n  const svg_elem = container.querySelector('.appsummary');\n  const svg = d3.select(svg_elem);\n  svg_elem.innerHTML = '';\n\n  svg\n    .append('text')\n    .attr('x', '0px')\n    .attr('y', '25px')\n    .text(msg)\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', '25px')\n    .attr('fill', 'black');\n}\n\nfunction update(container, apps) {\n  // No apps, sets status to \"No data\"\n  if (apps.length <= 0) {\n    set_status(container, 'No data');\n    return container;\n  }\n\n  const svg_elem = container.querySelector('.appsummary');\n  svg_elem.innerHTML = '';\n  const svg = d3.select(svg_elem);\n\n  // Remove apps without a duration from list\n  apps = apps.filter(function (app) {\n    return app.duration !== undefined;\n  });\n\n  let curr_y = 0;\n  const longest_duration = apps[0].duration;\n  _.each(apps, function (app, i) {\n    // TODO: Expand on click and list titles\n\n    // Variables\n    const width = (app.duration / longest_duration) * 100 + '%';\n    const barHeight = 50;\n    const textSize = 15;\n    const appcolor = app.color || getCategoryColorFromString(app.colorKey || app.name);\n    const hovercolor = Color(appcolor).darken(0.1).hex();\n\n    // The group representing an application in the barchart\n    const eg = svg.append('g');\n    eg.attr('id', 'summary_app_' + i)\n      .on('mouseover', function () {\n        eg.select('rect').style('fill', hovercolor);\n      })\n      .on('mouseout', function () {\n        eg.select('rect').style('fill', appcolor);\n      });\n\n    eg.append('title').text(app.hovertext + '\\n' + seconds_to_duration(app.duration));\n\n    // Color box background\n    eg.append('rect')\n      .attr('x', 0)\n      .attr('y', curr_y)\n      .attr('rx', 5)\n      .attr('ry', 5)\n      .attr('width', width)\n      .attr('height', barHeight)\n      .style('fill', appcolor);\n\n    // App name\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize)\n      .text(app.name)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    // Duration\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize + 5 + textSize)\n      .text(seconds_to_duration(app.duration))\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    curr_y += barHeight + 5;\n  });\n  curr_y -= 5;\n\n  svg.attr('height', curr_y);\n\n  return container;\n}\n\nfunction updateSummedEvents(container, summedEvents, titleKeyFunc, hoverKeyFunc, colorKeyFunc) {\n  if (hoverKeyFunc == null) {\n    hoverKeyFunc = titleKeyFunc;\n  }\n  const apps = _.map(summedEvents, e => {\n    return {\n      name: titleKeyFunc(e),\n      hovertext: hoverKeyFunc(e),\n      duration: e.duration,\n      color: e.data['$color'],\n      colorKey: colorKeyFunc(e),\n    };\n  });\n  update(container, apps);\n}\n\nexport default {\n  create: create,\n  update: update,\n  updateSummedEvents: updateSummedEvents,\n  set_status: set_status,\n};\n"]}]}