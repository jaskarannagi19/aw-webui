{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/EventEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/EventEditor.vue","mtime":1622212604093},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9qYXNrYXJhbi9jb2RlL2phc2thcmFuL2FjdGl2aXR5d2F0Y2gvYXctc2VydmVyL2F3LXdlYnVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3RpbWVzJzsKaW1wb3J0ICd2dWUtYXdlc29tZS9pY29ucy9zYXZlJzsKaW1wb3J0ICd2dWUtYXdlc29tZS9pY29ucy90cmFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRXZlbnRFZGl0b3InLAogIHByb3BzOiB7CiAgICBldmVudDogT2JqZWN0LAogICAgYnVja2V0X2lkOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0ZWRFdmVudDogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmV2ZW50KSkKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc3RhcnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLmVkaXRlZEV2ZW50LnRpbWVzdGFtcCkuZm9ybWF0KCk7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGR0KSB7CiAgICAgICAgdGhpcy5lZGl0ZWRFdmVudC5kdXJhdGlvbiA9IG1vbWVudCh0aGlzLmVuZCkuZGlmZihkdCwgJ3NlY29uZHMnKTsKICAgICAgICB0aGlzLmVkaXRlZEV2ZW50LnRpbWVzdGFtcCA9IG5ldyBEYXRlKGR0KTsKICAgICAgfQogICAgfSwKICAgIGVuZDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICB2YXIgZW5kID0gbW9tZW50KHRoaXMuZWRpdGVkRXZlbnQudGltZXN0YW1wKS5hZGQodGhpcy5lZGl0ZWRFdmVudC5kdXJhdGlvbiwgJ3NlY29uZHMnKTsKICAgICAgICByZXR1cm4gZW5kLmZvcm1hdCgpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChkdCkgewogICAgICAgIHRoaXMuZWRpdGVkRXZlbnQuZHVyYXRpb24gPSBtb21lbnQoZHQpLmRpZmYodGhpcy5lZGl0ZWRFdmVudC50aW1lc3RhbXAsICdzZWNvbmRzJyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnc2F2ZScsIF90aGlzLmVkaXRlZEV2ZW50KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXcucmVwbGFjZUV2ZW50KF90aGlzLmJ1Y2tldF9pZCwgX3RoaXMuZWRpdGVkRXZlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlXzogZnVuY3Rpb24gZGVsZXRlXygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgnZGVsZXRlJywgX3RoaXMyLmV2ZW50KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRhdy5kZWxldGVFdmVudChfdGhpczIuYnVja2V0X2lkLCBfdGhpczIuZXZlbnQuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJHJlZnMuZXZlbnRFZGl0TW9kYWwuaGlkZSgpOwogICAgICB0aGlzLiRlbWl0KCdjbG9zZScsIHRoaXMuZXZlbnQpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["EventEditor.vue"],"names":[],"mappings":";;;AAkDA,OAAA,MAAA,MAAA,QAAA;AAEA,OAAA,yBAAA;AACA,OAAA,wBAAA;AACA,OAAA,yBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,KAAA,CAAA;AADA,KAAA;AAGA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,GAAA,EAAA,eAAA;AACA,eAAA,MAAA,CAAA,KAAA,WAAA,CAAA,SAAA,CAAA,CAAA,MAAA,EAAA;AACA,OAHA;AAIA,MAAA,GAAA,EAAA,aAAA,EAAA,EAAA;AAEA,aAAA,WAAA,CAAA,QAAA,GAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA,IAAA,CAAA,EAAA,EAAA,SAAA,CAAA;AACA,aAAA,WAAA,CAAA,SAAA,GAAA,IAAA,IAAA,CAAA,EAAA,CAAA;AACA;AARA,KADA;AAWA,IAAA,GAAA,EAAA;AACA,MAAA,GAAA,EAAA,eAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,KAAA,WAAA,CAAA,SAAA,CAAA,CAAA,GAAA,CAAA,KAAA,WAAA,CAAA,QAAA,EAAA,SAAA,CAAA;AACA,eAAA,GAAA,CAAA,MAAA,EAAA;AACA,OAJA;AAKA,MAAA,GAAA,EAAA,aAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,QAAA,GAAA,MAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,KAAA,WAAA,CAAA,SAAA,EAAA,SAAA,CAAA;AACA;AAPA;AAXA,GAXA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAAA,CAAA,KAAA,CAAA,MAAA,EAAA,KAAA,CAAA,WAAA;;AAFA;AAAA,uBAGA,KAAA,CAAA,GAAA,CAAA,YAAA,CAAA,KAAA,CAAA,SAAA,EAAA,KAAA,CAAA,WAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,KALA;AAMA,IAAA,OANA,qBAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,MAAA,CAAA,KAAA,CAAA,QAAA,EAAA,MAAA,CAAA,KAAA;;AAFA;AAAA,uBAGA,MAAA,CAAA,GAAA,CAAA,WAAA,CAAA,MAAA,CAAA,SAAA,EAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,KAVA;AAWA,IAAA,KAXA,mBAWA;AACA,WAAA,KAAA,CAAA,cAAA,CAAA,IAAA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,KAAA,KAAA;AACA;AAdA;AAhCA,CAAA","sourcesContent":["<template lang=\"pug\">\nb-modal(:id=\"'edit-modal-' + event.id\", ref=\"eventEditModal\", title=\"Edit event\", centered, hide-footer)\n  table(style=\"width: 100%\")\n    tr\n      th Bucket\n      td {{ bucket_id }}\n    tr\n      th ID\n      td {{ event.id }}\n    tr\n      th Start\n      datetime(type=\"datetime\" v-model=\"start\")\n    tr\n      th End\n      datetime(type=\"datetime\" v-model=\"end\")\n    tr\n      th Duration\n      td {{ editedEvent.duration | friendlyduration }}\n\n  hr\n\n  table(style=\"width: 100%\")\n    tr\n      th Key\n      th Value\n    tr(v-for=\"(v, k) in event.data\")\n      td\n        b-input(disabled, :value=\"k\", size=\"sm\")\n      td\n        b-checkbox(v-if=\"typeof event.data[k] === typeof true\", v-model=\"editedEvent.data[k]\", style=\"margin: 0.25em\")\n        b-input(v-if=\"typeof event.data[k] === typeof 'string'\", v-model=\"editedEvent.data[k]\", size=\"sm\")\n\n  hr\n\n  div.float-left\n    b-button.mx-1(@click=\"delete_(); close();\" variant=\"danger\")\n      icon.mx-1(name=\"trash\")\n      | Delete\n  div.float-right\n    b-button.mx-1(@click=\"close\")\n      icon.mx-1(name=\"times\")\n      | Cancel\n    b-button.mx-1(@click=\"save(); close();\", variant=\"primary\")\n      icon.mx-1(name=\"save\")\n      | Save\n</template>\n\n<style lang=\"scss\"></style>\n\n<script>\nimport moment from 'moment';\n\nimport 'vue-awesome/icons/times';\nimport 'vue-awesome/icons/save';\nimport 'vue-awesome/icons/trash';\n\nexport default {\n  name: 'EventEditor',\n  props: {\n    event: Object,\n    bucket_id: String,\n  },\n  data() {\n    return {\n      editedEvent: JSON.parse(JSON.stringify(this.event)),\n    };\n  },\n  computed: {\n    start: {\n      get: function () {\n        return moment(this.editedEvent.timestamp).format();\n      },\n      set: function (dt) {\n        // Duration needs to be set first since otherwise the computed for end will use the new timestamp\n        this.editedEvent.duration = moment(this.end).diff(dt, 'seconds');\n        this.editedEvent.timestamp = new Date(dt);\n      },\n    },\n    end: {\n      get: function () {\n        const end = moment(this.editedEvent.timestamp).add(this.editedEvent.duration, 'seconds');\n        return end.format();\n      },\n      set: function (dt) {\n        this.editedEvent.duration = moment(dt).diff(this.editedEvent.timestamp, 'seconds');\n      },\n    },\n  },\n  methods: {\n    async save() {\n      // This emit needs to be called first, otherwise it won't occur for some reason\n      this.$emit('save', this.editedEvent);\n      await this.$aw.replaceEvent(this.bucket_id, this.editedEvent);\n    },\n    async delete_() {\n      // This emit needs to be called first, otherwise it won't occur for some reason\n      this.$emit('delete', this.event);\n      await this.$aw.deleteEvent(this.bucket_id, this.event.id);\n    },\n    close() {\n      this.$refs.eventEditModal.hide();\n      this.$emit('close', this.event);\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}