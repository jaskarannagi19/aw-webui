{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/components/EventEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/components/EventEditor.vue","mtime":1622830085270},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9qYXNrYXJhbi9jb2RlL2phc2thcmFuL2FjdGl2aXR5d2F0Y2gvYXctc2VydmVyLXJ1c3QvYXctd2VidWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvdGltZXMnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3NhdmUnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3RyYXNoJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFdmVudEVkaXRvcicsCiAgcHJvcHM6IHsKICAgIGV2ZW50OiBPYmplY3QsCiAgICBidWNrZXRfaWQ6IFN0cmluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXRlZEV2ZW50OiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZXZlbnQpKQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdGFydDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gbW9tZW50KHRoaXMuZWRpdGVkRXZlbnQudGltZXN0YW1wKS5mb3JtYXQoKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZHQpIHsKICAgICAgICB0aGlzLmVkaXRlZEV2ZW50LmR1cmF0aW9uID0gbW9tZW50KHRoaXMuZW5kKS5kaWZmKGR0LCAnc2Vjb25kcycpOwogICAgICAgIHRoaXMuZWRpdGVkRXZlbnQudGltZXN0YW1wID0gbmV3IERhdGUoZHQpOwogICAgICB9CiAgICB9LAogICAgZW5kOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBlbmQgPSBtb21lbnQodGhpcy5lZGl0ZWRFdmVudC50aW1lc3RhbXApLmFkZCh0aGlzLmVkaXRlZEV2ZW50LmR1cmF0aW9uLCAnc2Vjb25kcycpOwogICAgICAgIHJldHVybiBlbmQuZm9ybWF0KCk7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGR0KSB7CiAgICAgICAgdGhpcy5lZGl0ZWRFdmVudC5kdXJhdGlvbiA9IG1vbWVudChkdCkuZGlmZih0aGlzLmVkaXRlZEV2ZW50LnRpbWVzdGFtcCwgJ3NlY29uZHMnKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdzYXZlJywgX3RoaXMuZWRpdGVkRXZlbnQpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRhdy5yZXBsYWNlRXZlbnQoX3RoaXMuYnVja2V0X2lkLCBfdGhpcy5lZGl0ZWRFdmVudCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkZWxldGVfOiBmdW5jdGlvbiBkZWxldGVfKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCdkZWxldGUnLCBfdGhpczIuZXZlbnQpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGF3LmRlbGV0ZUV2ZW50KF90aGlzMi5idWNrZXRfaWQsIF90aGlzMi5ldmVudC5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kcmVmcy5ldmVudEVkaXRNb2RhbC5oaWRlKCk7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJywgdGhpcy5ldmVudCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["EventEditor.vue"],"names":[],"mappings":";;;AAkDA,OAAA,MAAA,MAAA,QAAA;AAEA,OAAA,yBAAA;AACA,OAAA,wBAAA;AACA,OAAA,yBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,KAAA,CAAA;AADA,KAAA;AAGA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,GAAA,EAAA,eAAA;AACA,eAAA,MAAA,CAAA,KAAA,WAAA,CAAA,SAAA,CAAA,CAAA,MAAA,EAAA;AACA,OAHA;AAIA,MAAA,GAAA,EAAA,aAAA,EAAA,EAAA;AAEA,aAAA,WAAA,CAAA,QAAA,GAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA,IAAA,CAAA,EAAA,EAAA,SAAA,CAAA;AACA,aAAA,WAAA,CAAA,SAAA,GAAA,IAAA,IAAA,CAAA,EAAA,CAAA;AACA;AARA,KADA;AAWA,IAAA,GAAA,EAAA;AACA,MAAA,GAAA,EAAA,eAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,KAAA,WAAA,CAAA,SAAA,CAAA,CAAA,GAAA,CAAA,KAAA,WAAA,CAAA,QAAA,EAAA,SAAA,CAAA;AACA,eAAA,GAAA,CAAA,MAAA,EAAA;AACA,OAJA;AAKA,MAAA,GAAA,EAAA,aAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,QAAA,GAAA,MAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,KAAA,WAAA,CAAA,SAAA,EAAA,SAAA,CAAA;AACA;AAPA;AAXA,GAXA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAAA,CAAA,KAAA,CAAA,MAAA,EAAA,KAAA,CAAA,WAAA;;AAFA;AAAA,uBAGA,KAAA,CAAA,GAAA,CAAA,YAAA,CAAA,KAAA,CAAA,SAAA,EAAA,KAAA,CAAA,WAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,KALA;AAMA,IAAA,OANA,qBAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,MAAA,CAAA,KAAA,CAAA,QAAA,EAAA,MAAA,CAAA,KAAA;;AAFA;AAAA,uBAGA,MAAA,CAAA,GAAA,CAAA,WAAA,CAAA,MAAA,CAAA,SAAA,EAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,KAVA;AAWA,IAAA,KAXA,mBAWA;AACA,WAAA,KAAA,CAAA,cAAA,CAAA,IAAA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,KAAA,KAAA;AACA;AAdA;AAhCA,CAAA","sourcesContent":["<template lang=\"pug\">\nb-modal(:id=\"'edit-modal-' + event.id\", ref=\"eventEditModal\", title=\"Edit event\", centered, hide-footer)\n  table(style=\"width: 100%\")\n    tr\n      th Bucket\n      td {{ bucket_id }}\n    tr\n      th ID\n      td {{ event.id }}\n    tr\n      th Start\n      datetime(type=\"datetime\" v-model=\"start\")\n    tr\n      th End\n      datetime(type=\"datetime\" v-model=\"end\")\n    tr\n      th Duration\n      td {{ editedEvent.duration | friendlyduration }}\n\n  hr\n\n  table(style=\"width: 100%\")\n    tr\n      th Key\n      th Value\n    tr(v-for=\"(v, k) in event.data\")\n      td\n        b-input(disabled, :value=\"k\", size=\"sm\")\n      td\n        b-checkbox(v-if=\"typeof event.data[k] === typeof true\", v-model=\"editedEvent.data[k]\", style=\"margin: 0.25em\")\n        b-input(v-if=\"typeof event.data[k] === typeof 'string'\", v-model=\"editedEvent.data[k]\", size=\"sm\")\n\n  hr\n\n  div.float-left\n    b-button.mx-1(@click=\"delete_(); close();\" variant=\"danger\")\n      icon.mx-1(name=\"trash\")\n      | Delete\n  div.float-right\n    b-button.mx-1(@click=\"close\")\n      icon.mx-1(name=\"times\")\n      | Cancel\n    b-button.mx-1(@click=\"save(); close();\", variant=\"primary\")\n      icon.mx-1(name=\"save\")\n      | Save\n</template>\n\n<style lang=\"scss\"></style>\n\n<script>\nimport moment from 'moment';\n\nimport 'vue-awesome/icons/times';\nimport 'vue-awesome/icons/save';\nimport 'vue-awesome/icons/trash';\n\nexport default {\n  name: 'EventEditor',\n  props: {\n    event: Object,\n    bucket_id: String,\n  },\n  data() {\n    return {\n      editedEvent: JSON.parse(JSON.stringify(this.event)),\n    };\n  },\n  computed: {\n    start: {\n      get: function () {\n        return moment(this.editedEvent.timestamp).format();\n      },\n      set: function (dt) {\n        // Duration needs to be set first since otherwise the computed for end will use the new timestamp\n        this.editedEvent.duration = moment(this.end).diff(dt, 'seconds');\n        this.editedEvent.timestamp = new Date(dt);\n      },\n    },\n    end: {\n      get: function () {\n        const end = moment(this.editedEvent.timestamp).add(this.editedEvent.duration, 'seconds');\n        return end.format();\n      },\n      set: function (dt) {\n        this.editedEvent.duration = moment(dt).diff(this.editedEvent.timestamp, 'seconds');\n      },\n    },\n  },\n  methods: {\n    async save() {\n      // This emit needs to be called first, otherwise it won't occur for some reason\n      this.$emit('save', this.editedEvent);\n      await this.$aw.replaceEvent(this.bucket_id, this.editedEvent);\n    },\n    async delete_() {\n      // This emit needs to be called first, otherwise it won't occur for some reason\n      this.$emit('delete', this.event);\n      await this.$aw.deleteEvent(this.bucket_id, this.event.id);\n    },\n    close() {\n      this.$refs.eventEditModal.hide();\n      this.$emit('close', this.event);\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}