{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/Bucket.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/Bucket.vue","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQnVja2V0JywKICBwcm9wczogewogICAgaWQ6IFN0cmluZywKICB9LAogIGRhdGE6ICgpID0+IHsKICAgIHJldHVybiB7CiAgICAgIGJ1Y2tldF93aXRoX2V2ZW50czogeyBldmVudHM6IFtdIH0sCiAgICAgIGV2ZW50czogW10sCiAgICAgIGV2ZW50Y291bnQ6ICc/JywKICAgICAgZGF0ZXJhbmdlOiBudWxsLAogICAgICBtYXhEdXJhdGlvbjogMzEgKiAyNCAqIDYwICogNjAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGJ1Y2tldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2J1Y2tldHMvZ2V0QnVja2V0J10odGhpcy5pZCkgfHwge307CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGRhdGVyYW5nZTogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICBhd2FpdCB0aGlzLmdldEV2ZW50cyh0aGlzLmlkKTsKICAgIH0sCiAgfSwKICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYnVja2V0cy9lbnN1cmVCdWNrZXRzJyk7CiAgICBhd2FpdCB0aGlzLmdldEV2ZW50Q291bnQodGhpcy5pZCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRFdmVudHM6IGFzeW5jIGZ1bmN0aW9uIChidWNrZXRfaWQpIHsKICAgICAgdGhpcy5idWNrZXRfd2l0aF9ldmVudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYnVja2V0cy9nZXRCdWNrZXRXaXRoRXZlbnRzJywgewogICAgICAgIGlkOiBidWNrZXRfaWQsCiAgICAgICAgc3RhcnQ6IHRoaXMuZGF0ZXJhbmdlWzBdLmZvcm1hdCgpLAogICAgICAgIGVuZDogdGhpcy5kYXRlcmFuZ2VbMV0uZm9ybWF0KCksCiAgICAgIH0pOwogICAgICB0aGlzLmV2ZW50cyA9IHRoaXMuYnVja2V0X3dpdGhfZXZlbnRzLmV2ZW50czsKICAgIH0sCiAgICBnZXRFdmVudENvdW50OiBhc3luYyBmdW5jdGlvbiAoYnVja2V0X2lkKSB7CiAgICAgIHRoaXMuZXZlbnRjb3VudCA9IChhd2FpdCB0aGlzLiRhdy5jb3VudEV2ZW50cyhidWNrZXRfaWQpKS5kYXRhOwogICAgfSwKICAgIHVwZGF0ZUV2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc3QgaSA9IHRoaXMuZXZlbnRzLmZpbmRJbmRleChlID0+IGUuaWQgPT0gZXZlbnQuaWQpOwogICAgICBpZiAoaSAhPSAtMSkgewogICAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGluc3RlYWQgb2YgdGhpcy5ldmVudHNbaV0gYmVjYXVzZSBpbnNpZGVzIG9mIGFycmF5cwogICAgICAgIC8vIGFyZSBub3QgcmVhY3RpdmUgaW4gVnVlLgogICAgICAgIHRoaXMuJHNldCh0aGlzLmV2ZW50cywgaSwgZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJzooJyk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Bucket.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Bucket.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"pug\">\n\ndiv\n  h3 {{ id }}\n  table\n    tr\n      th Type:\n      td {{ bucket.type }}\n    tr\n      th Client:\n      td {{ bucket.client }}\n    tr\n      th Hostname:\n      td {{ bucket.hostname }}\n    tr\n      th Created:\n      td {{ bucket.created | iso8601 }}\n    tr(v-if=\"bucket.metadata\")\n      th First/last event:\n      td\n        | {{ bucket.metadata.start}} /\n        | {{ bucket.metadata.end }}\n    tr\n      th Eventcount:\n      td {{ eventcount }}\n\n  input-timeinterval(v-model=\"daterange\", :maxDuration=\"maxDuration\")\n\n  vis-timeline(:buckets=\"[bucket_with_events]\", :showRowLabels=\"false\")\n\n  aw-eventlist(:bucket_id=\"id\", @save=\"updateEvent\", :events=\"events\" editable=true)\n</template>\n\n<script>\nexport default {\n  name: 'Bucket',\n  props: {\n    id: String,\n  },\n  data: () => {\n    return {\n      bucket_with_events: { events: [] },\n      events: [],\n      eventcount: '?',\n      daterange: null,\n      maxDuration: 31 * 24 * 60 * 60,\n    };\n  },\n  computed: {\n    bucket() {\n      return this.$store.getters['buckets/getBucket'](this.id) || {};\n    },\n  },\n  watch: {\n    daterange: async function () {\n      await this.getEvents(this.id);\n    },\n  },\n  mounted: async function () {\n    await this.$store.dispatch('buckets/ensureBuckets');\n    await this.getEventCount(this.id);\n  },\n  methods: {\n    getEvents: async function (bucket_id) {\n      this.bucket_with_events = await this.$store.dispatch('buckets/getBucketWithEvents', {\n        id: bucket_id,\n        start: this.daterange[0].format(),\n        end: this.daterange[1].format(),\n      });\n      this.events = this.bucket_with_events.events;\n    },\n    getEventCount: async function (bucket_id) {\n      this.eventcount = (await this.$aw.countEvents(bucket_id)).data;\n    },\n    updateEvent: function (event) {\n      const i = this.events.findIndex(e => e.id == event.id);\n      if (i != -1) {\n        // This is needed instead of this.events[i] because insides of arrays\n        // are not reactive in Vue.\n        this.$set(this.events, i, event);\n      } else {\n        console.error(':(');\n      }\n    },\n  },\n};\n</script>\n"]}]}