{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/activity/ActivityView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/src/views/activity/ActivityView.vue","mtime":1622830085274},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server-rust/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvc2F2ZSc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvdGltZXMnOwppbXBvcnQgJ3Z1ZS1hd2Vzb21lL2ljb25zL3RyYXNoJzsKaW1wb3J0ICd2dWUtYXdlc29tZS9pY29ucy91bmRvJzsKaW1wb3J0IGRyYWdnYWJsZSBmcm9tICd2dWVkcmFnZ2FibGUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBY3Rpdml0eVZpZXcnLAogIGNvbXBvbmVudHM6IHsKICAgIGRyYWdnYWJsZTogZHJhZ2dhYmxlLAogIH0sCiAgcHJvcHM6IHsKICAgIHZpZXdfaWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnZGVmYXVsdCcgfSwKICAgIHBlcmlvZExlbmd0aDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdkYXknLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4geyBlZGl0aW5nOiBmYWxzZSB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMudmlld19pZCA9PSAnZGVmYXVsdCcpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudmlld3Mudmlld3NbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnZpZXdzLnZpZXdzLmZpbmQodiA9PiB2LmlkID09IHRoaXMudmlld19pZCk7CiAgICAgIH0KICAgIH0sCiAgICBlbGVtZW50czogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5lbGVtZW50czsKICAgICAgfSwKICAgICAgc2V0KGVsZW1lbnRzKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd2aWV3cy9zZXRFbGVtZW50cycsIHsgdmlld19pZDogdGhpcy52aWV3LmlkLCBlbGVtZW50cyB9KTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndmlld3Mvc2F2ZScpOwogICAgfSwKICAgIGRpc2NhcmQoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3cy9sb2FkJyk7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3ZpZXdzL3JlbW92ZVZpZXcnLCB7IHZpZXdfaWQ6IHRoaXMudmlldy5pZCB9KTsKICAgICAgLy8gSWYgd2UncmUgb24gYW4gVVJMIHRoYXQnbGwgYmUgaW52YWxpZCBhZnRlciByZW1vdmluZyB0aGUgdmlldywgbmF2aWdhdGUgdG8gdGhlIG1haW4vZGVmYXVsdCB2aWV3CiAgICAgIGlmICghdGhpcy4kcm91dGUucGF0aC5pbmNsdWRlcygnZGVmYXVsdCcpKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy4vZGVmYXVsdCcpOwogICAgICB9CiAgICB9LAogICAgcmVzdG9yZURlZmF1bHRzKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3ZpZXdzL3Jlc3RvcmVEZWZhdWx0cycpOwogICAgICBhbGVydCgKICAgICAgICAiQWxsIHZpZXdzIGhhdmUgYmVlbiByZXN0b3JlZCB0byBkZWZhdWx0cy4gQ2hhbmdlcyB3b24ndCBiZSBzYXZlZCB1bnRpbCB5b3UgY2xpY2sgJ1NhdmUnLiIKICAgICAgKTsKICAgICAgLy8gSWYgd2UncmUgb24gYW4gVVJMIHRoYXQgbWlnaHQgYmVjb21lIGludmFsaWQsIG5hdmlnYXRlIHRvIHRoZSBtYWluL2RlZmF1bHQgdmlldwogICAgICBpZiAoIXRoaXMuJHJvdXRlLnBhdGguaW5jbHVkZXMoJ2RlZmF1bHQnKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcuL2RlZmF1bHQnKTsKICAgICAgfQogICAgfSwKICAgIGFkZFZpc3VhbGl6YXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd2aWV3cy9hZGRWaXN1YWxpemF0aW9uJywgeyB2aWV3X2lkOiB0aGlzLnZpZXcuaWQsIHR5cGU6ICd0b3BfYXBwcycgfSk7CiAgICB9LAogICAgYXN5bmMgb25UeXBlQ2hhbmdlKGlkLCB0eXBlKSB7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld3MvZWRpdFZpZXcnLCB7IHZpZXdfaWQ6IHRoaXMudmlldy5pZCwgZWxfaWQ6IGlkLCB0eXBlIH0pOwogICAgfSwKICAgIGFzeW5jIG9uUmVtb3ZlKGlkKSB7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld3MvcmVtb3ZlVmlzdWFsaXphdGlvbicsIHsgdmlld19pZDogdGhpcy52aWV3LmlkLCBlbF9pZDogaWQgfSk7CiAgICB9LAogICAgaXNWaXNMYXJnZShlbCkgewogICAgICByZXR1cm4gZWwudHlwZSA9PSAnc3VuYnVyc3RfY2xvY2snOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["ActivityView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActivityView.vue","sourceRoot":"src/views/activity","sourcesContent":["<template lang=\"pug\">\ndiv(v-if=\"view\")\n  draggable.row(v-model=\"elements\" handle=\".handle\")\n    // TODO: Handle large/variable sized visualizations better\n    div.col-md-6.col-lg-4.p-3(v-for=\"el, index in elements\", :key=\"index\", :class=\"{'col-md-12': isVisLarge(el), 'col-lg-8': isVisLarge(el)}\")\n      aw-selectable-vis(:id=\"index\" :type=\"el.type\" @onTypeChange=\"onTypeChange\" @onRemove=\"onRemove\" :editable=\"editing\")\n\n    div.col-md-6.col-lg-4.p-3(v-if=\"editing\")\n      b-button(@click=\"addVisualization\" variant=\"outline-dark\" block size=\"lg\")\n        icon(name=\"plus\")\n        span Add visualization\n\n  div(v-if=\"editing\").mt-2\n    div.d-flex.flex-row-reverse\n      b-button(variant=\"outline-dark\" @click=\"discard(); editing = !editing;\")\n        icon(name=\"times\")\n        span Cancel\n      b-button.mr-2(variant=\"success\" @click=\"save(); editing = !editing;\")\n        icon(name=\"save\")\n        span Save\n    div.mt-2.d-flex.flex-row-reverse\n      b-button(variant=\"warning\" size=\"sm\" @click=\"restoreDefaults();\")\n        icon(name=\"undo\")\n        span Restore defaults\n      b-button.mr-2(variant=\"danger\" size=\"sm\" @click=\"remove();\")\n        icon(name=\"trash\")\n        span Remove\n  div(v-else).d-flex.flex-row-reverse.mt-2\n    b-button(variant=\"outline-dark\" size=\"sm\" @click=\"editing = !editing\")\n      icon(name=\"edit\")\n      span Edit view\n</template>\n\n<script>\nimport 'vue-awesome/icons/save';\nimport 'vue-awesome/icons/times';\nimport 'vue-awesome/icons/trash';\nimport 'vue-awesome/icons/undo';\nimport draggable from 'vuedraggable';\n\nexport default {\n  name: 'ActivityView',\n  components: {\n    draggable: draggable,\n  },\n  props: {\n    view_id: { type: String, default: 'default' },\n    periodLength: {\n      type: String,\n      default: 'day',\n    },\n  },\n  data() {\n    return { editing: false };\n  },\n  computed: {\n    view: function () {\n      if (this.view_id == 'default') {\n        return this.$store.state.views.views[0];\n      } else {\n        return this.$store.state.views.views.find(v => v.id == this.view_id);\n      }\n    },\n    elements: {\n      get() {\n        return this.view.elements;\n      },\n      set(elements) {\n        this.$store.commit('views/setElements', { view_id: this.view.id, elements });\n      },\n    },\n  },\n  methods: {\n    save() {\n      this.$store.dispatch('views/save');\n    },\n    discard() {\n      this.$store.dispatch('views/load');\n    },\n    remove() {\n      this.$store.commit('views/removeView', { view_id: this.view.id });\n      // If we're on an URL that'll be invalid after removing the view, navigate to the main/default view\n      if (!this.$route.path.includes('default')) {\n        this.$router.replace('./default');\n      }\n    },\n    restoreDefaults() {\n      this.$store.commit('views/restoreDefaults');\n      alert(\n        \"All views have been restored to defaults. Changes won't be saved until you click 'Save'.\"\n      );\n      // If we're on an URL that might become invalid, navigate to the main/default view\n      if (!this.$route.path.includes('default')) {\n        this.$router.replace('./default');\n      }\n    },\n    addVisualization: function () {\n      this.$store.commit('views/addVisualization', { view_id: this.view.id, type: 'top_apps' });\n    },\n    async onTypeChange(id, type) {\n      await this.$store.commit('views/editView', { view_id: this.view.id, el_id: id, type });\n    },\n    async onRemove(id) {\n      await this.$store.commit('views/removeVisualization', { view_id: this.view.id, el_id: id });\n    },\n    isVisLarge(el) {\n      return el.type == 'sunburst_clock';\n    },\n  },\n};\n</script>\n"]}]}