{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/InputTimeInterval.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/InputTimeInterval.vue","mtime":1622212604093},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpbnB1dC10aW1laW50ZXJ2YWwnLAogIHByb3BzOiB7CiAgICBkZWZhdWx0RHVyYXRpb246IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA2MCAqIDYwLAogICAgfSwKICAgIG1heER1cmF0aW9uOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHVyYXRpb246IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kZWZhdWx0RHVyYXRpb24pKSwgLy8gTWFrZSBhIGNvcHkgb2YgZGVmYXVsdER1cmF0aW9uCiAgICAgIG1vZGU6ICdsYXN0X2R1cmF0aW9uJywKICAgICAgc3RhcnQ6IG51bGwsCiAgICAgIGVuZDogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdmFsdWU6IHsKICAgICAgZ2V0KCkgewogICAgICAgIGlmICh0aGlzLm1vZGUgPT0gJ3JhbmdlJyAmJiB0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7CiAgICAgICAgICByZXR1cm4gW21vbWVudCh0aGlzLnN0YXJ0KSwgbW9tZW50KHRoaXMuZW5kKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBbbW9tZW50KCkuc3VidHJhY3QodGhpcy5kdXJhdGlvbiwgJ3NlY29uZHMnKSwgbW9tZW50KCldOwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCiAgICBlbXB0eURhdGVyYW5nZSgpIHsKICAgICAgcmV0dXJuICEodGhpcy5zdGFydCAmJiB0aGlzLmVuZCk7CiAgICB9LAogICAgaW52YWxpZERhdGVyYW5nZSgpIHsKICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLnN0YXJ0KSA+PSBtb21lbnQodGhpcy5lbmQpOwogICAgfSwKICAgIGRhdGVyYW5nZVRvb0xvbmcoKSB7CiAgICAgIHJldHVybiBtb21lbnQodGhpcy5zdGFydCkuYWRkKHRoaXMubWF4RHVyYXRpb24sICdzZWNvbmRzJykuaXNCZWZvcmUobW9tZW50KHRoaXMuZW5kKSk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudmFsdWVDaGFuZ2VkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWx1ZUNoYW5nZWQoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLm1vZGUgPT0gJ2xhc3RfZHVyYXRpb24nIHx8CiAgICAgICAgKCF0aGlzLmVtcHR5RGF0ZXJhbmdlICYmICF0aGlzLmludmFsaWREYXRlcmFuZ2UgJiYgIXRoaXMuZGF0ZXJhbmdlVG9vTG9uZykKICAgICAgKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLnZhbHVlKTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["InputTimeInterval.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InputTimeInterval.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"pug\">\ndiv\n  div\n    b-alert(v-if=\"mode == 'range' && invalidDaterange\", variant=\"warning\", show)\n      | The selected date range is invalid. The second date must be greater than the first date.\n    b-alert(v-if=\"mode == 'range' && daterangeTooLong\", variant=\"warning\", show)\n      | The selected date range is too long. The maximum is {{ maxDuration/(24*60*60) }} days.\n\n    table\n      tr\n        th.pr-2\n          label(for=\"mode\") Interval mode:\n        td\n          select(id=\"mode\", v-model=\"mode\")\n            option(value='last_duration') Last duration\n            option(value='range') Date range\n      tr(v-if=\"mode == 'last_duration'\")\n        th.pr-2\n          label(for=\"duration\") Show last:\n        td\n          select(id=\"duration\", v-model=\"duration\", @change=\"valueChanged\")\n            option(:value=\"15*60\") 15min\n            option(:value=\"30*60\") 30min\n            option(:value=\"60*60\") 1h\n            option(:value=\"2*60*60\") 2h\n            option(:value=\"4*60*60\") 4h\n            option(:value=\"6*60*60\") 6h\n            option(:value=\"12*60*60\") 12h\n            option(:value=\"24*60*60\") 24h\n      tr(v-if=\"mode == 'range'\")\n        th.pr-2 Range:\n        td\n          input(type=\"date\", v-model=\"start\")\n          input(type=\"date\", v-model=\"end\")\n          button(\n            class=\"btn btn-outline-dark btn-sm\",\n            type=\"button\", \n            :disabled=\"mode == 'range' && (invalidDaterange || emptyDaterange || daterangeTooLong)\",\n            @click=\"valueChanged\"\n          ) Update\n\n</template>\n\n<style scoped lang=\"scss\"></style>\n\n<script>\nimport moment from 'moment';\nexport default {\n  name: 'input-timeinterval',\n  props: {\n    defaultDuration: {\n      type: Number,\n      default: 60 * 60,\n    },\n    maxDuration: {\n      type: Number,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      duration: JSON.parse(JSON.stringify(this.defaultDuration)), // Make a copy of defaultDuration\n      mode: 'last_duration',\n      start: null,\n      end: null,\n    };\n  },\n  computed: {\n    value: {\n      get() {\n        if (this.mode == 'range' && this.start && this.end) {\n          return [moment(this.start), moment(this.end)];\n        } else {\n          return [moment().subtract(this.duration, 'seconds'), moment()];\n        }\n      },\n    },\n    emptyDaterange() {\n      return !(this.start && this.end);\n    },\n    invalidDaterange() {\n      return moment(this.start) >= moment(this.end);\n    },\n    daterangeTooLong() {\n      return moment(this.start).add(this.maxDuration, 'seconds').isBefore(moment(this.end));\n    },\n  },\n  mounted() {\n    this.valueChanged();\n  },\n  methods: {\n    valueChanged() {\n      if (\n        this.mode == 'last_duration' ||\n        (!this.emptyDaterange && !this.invalidDaterange && !this.daterangeTooLong)\n      ) {\n        this.$emit('input', this.value);\n      }\n    },\n  },\n};\n</script>\n"]}]}