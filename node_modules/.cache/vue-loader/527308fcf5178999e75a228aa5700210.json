{"remainingRequest":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/SelectableVisualization.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/src/components/SelectableVisualization.vue","mtime":1622212604093},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaskaran/code/jaskaran/activitywatch/aw-server/aw-webui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvY29nJzsKaW1wb3J0ICd2dWUtYXdlc29tZS9pY29ucy90aW1lcyc7CmltcG9ydCAndnVlLWF3ZXNvbWUvaWNvbnMvYmFycyc7CgppbXBvcnQgeyBzcGxpdF9ieV9ob3VyX2ludG9fZGF0YSB9IGZyb20gJ34vdXRpbC90cmFuc2Zvcm1zJzsKCi8vIFRPRE86IE1vdmUgdGhpcyBzb21ld2hlcmUgZWxzZQppbXBvcnQgeyBidWlsZF9jYXRlZ29yeV9oaWVyYXJjaHkgfSBmcm9tICd+L3V0aWwvY2xhc3Nlcyc7CmltcG9ydCB7IGdldENvbG9yRnJvbUNhdGVnb3J5IH0gZnJvbSAnfi91dGlsL2NvbG9yJzsKCmZ1bmN0aW9uIHBpY2tfc3VibmFtZV9hc19uYW1lKGMpIHsKICBjLm5hbWUgPSBjLnN1Ym5hbWU7CiAgYy5jaGlsZHJlbiA9IGMuY2hpbGRyZW4ubWFwKHBpY2tfc3VibmFtZV9hc19uYW1lKTsKICByZXR1cm4gYzsKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhdy1zZWxlY3RhYmxlLXZpcycsCiAgcHJvcHM6IHsKICAgIGlkOiBOdW1iZXIsCiAgICB0eXBlOiBTdHJpbmcsCiAgICBlZGl0YWJsZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sCiAgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlczogWwogICAgICAgICd0b3BfYXBwcycsCiAgICAgICAgJ3RvcF90aXRsZXMnLAogICAgICAgICd0b3BfZG9tYWlucycsCiAgICAgICAgJ3RvcF91cmxzJywKICAgICAgICAndG9wX2NhdGVnb3JpZXMnLAogICAgICAgICdjYXRlZ29yeV90cmVlJywKICAgICAgICAnY2F0ZWdvcnlfc3VuYnVyc3QnLAogICAgICAgICd0b3BfZWRpdG9yX2ZpbGVzJywKICAgICAgICAndG9wX2VkaXRvcl9sYW5ndWFnZXMnLAogICAgICAgICd0b3BfZWRpdG9yX3Byb2plY3RzJywKICAgICAgICAndGltZWxpbmVfYmFyY2hhcnQnLAogICAgICAgICdzdW5idXJzdF9jbG9jaycsCiAgICAgIF0sCiAgICAgIC8vIFRPRE86IE1vdmUgdGhpcyBmdW5jdGlvbiBzb21ld2hlcmUgZWxzZQogICAgICB0b3BfZWRpdG9yX2ZpbGVzX25hbWVmdW5jOiBlID0+IHsKICAgICAgICBsZXQgZiA9IGUuZGF0YS5maWxlIHx8ICcnOwogICAgICAgIGYgPSBmLnNwbGl0KCcvJyk7CiAgICAgICAgZiA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICByZXR1cm4gZjsKICAgICAgfSwKICAgICAgdG9wX2VkaXRvcl9maWxlc19ob3ZlcmZ1bmM6IGUgPT4gewogICAgICAgIHJldHVybiAnZmlsZTogJyArIGUuZGF0YS5maWxlICsgJ1xuJyArICdwcm9qZWN0OiAnICsgZS5kYXRhLnByb2plY3Q7CiAgICAgIH0sCiAgICAgIC8vIFRPRE86IE1vdmUgdGhpcyBmdW5jdGlvbiBzb21ld2hlcmUgZWxzZQogICAgICB0b3BfZWRpdG9yX3Byb2plY3RzX25hbWVmdW5jOiBlID0+IHsKICAgICAgICBsZXQgZiA9IGUuZGF0YS5wcm9qZWN0IHx8ICcnOwogICAgICAgIGYgPSBmLnNwbGl0KCcvJyk7CiAgICAgICAgZiA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICByZXR1cm4gZjsKICAgICAgfSwKICAgICAgdG9wX2VkaXRvcl9wcm9qZWN0c19ob3ZlcmZ1bmM6IGUgPT4gZS5kYXRhLnByb2plY3QsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpc3VhbGl6YXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wX2FwcHM6IHsKICAgICAgICAgIHRpdGxlOiAnVG9wIEFwcGxpY2F0aW9ucycsCiAgICAgICAgICBhdmFpbGFibGU6CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LndpbmRvdy5hdmFpbGFibGUgfHwKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkuYW5kcm9pZC5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICB0b3BfdGl0bGVzOiB7CiAgICAgICAgICB0aXRsZTogJ1RvcCBXaW5kb3cgVGl0bGVzJywKICAgICAgICAgIGF2YWlsYWJsZTogdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkud2luZG93LmF2YWlsYWJsZSwKICAgICAgICB9LAogICAgICAgIHRvcF9kb21haW5zOiB7CiAgICAgICAgICB0aXRsZTogJ1RvcCBCcm93c2VyIERvbWFpbnMnLAogICAgICAgICAgYXZhaWxhYmxlOiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS5icm93c2VyLmF2YWlsYWJsZSwKICAgICAgICB9LAogICAgICAgIHRvcF91cmxzOiB7CiAgICAgICAgICB0aXRsZTogJ1RvcCBCcm93c2VyIFVSTHMnLAogICAgICAgICAgYXZhaWxhYmxlOiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS5icm93c2VyLmF2YWlsYWJsZSwKICAgICAgICB9LAogICAgICAgIHRvcF9lZGl0b3JfZmlsZXM6IHsKICAgICAgICAgIHRpdGxlOiAnVG9wIEVkaXRvciBGaWxlcycsCiAgICAgICAgICBhdmFpbGFibGU6IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmVkaXRvci5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICB0b3BfZWRpdG9yX2xhbmd1YWdlczogewogICAgICAgICAgdGl0bGU6ICdUb3AgRWRpdG9yIExhbmd1YWdlcycsCiAgICAgICAgICBhdmFpbGFibGU6IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmVkaXRvci5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICB0b3BfZWRpdG9yX3Byb2plY3RzOiB7CiAgICAgICAgICB0aXRsZTogJ1RvcCBFZGl0b3IgUHJvamVjdHMnLAogICAgICAgICAgYXZhaWxhYmxlOiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS5lZGl0b3IuYXZhaWxhYmxlLAogICAgICAgIH0sCiAgICAgICAgdG9wX2NhdGVnb3JpZXM6IHsKICAgICAgICAgIHRpdGxlOiAnVG9wIENhdGVnb3JpZXMnLAogICAgICAgICAgYXZhaWxhYmxlOiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS5jYXRlZ29yeS5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICBjYXRlZ29yeV90cmVlOiB7CiAgICAgICAgICB0aXRsZTogJ0NhdGVnb3J5IFRyZWUnLAogICAgICAgICAgYXZhaWxhYmxlOiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS5jYXRlZ29yeS5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICBjYXRlZ29yeV9zdW5idXJzdDogewogICAgICAgICAgdGl0bGU6ICdDYXRlZ29yeSBTdW5idXJzdCcsCiAgICAgICAgICBhdmFpbGFibGU6IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmNhdGVnb3J5LmF2YWlsYWJsZSwKICAgICAgICB9LAogICAgICAgIHRpbWVsaW5lX2JhcmNoYXJ0OiB7CiAgICAgICAgICB0aXRsZTogJ1RpbWVsaW5lIChiYXJjaGFydCknLAogICAgICAgICAgYXZhaWxhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgc3VuYnVyc3RfY2xvY2s6IHsKICAgICAgICAgIHRpdGxlOiAnU3VuYnVyc3QgY2xvY2snLAogICAgICAgICAgYXZhaWxhYmxlOgogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hY3Rpdml0eS53aW5kb3cuYXZhaWxhYmxlICYmCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmFjdGl2ZS5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgfTsKICAgIH0sCiAgICBoYXNfcHJlcmVxdWlzaXRlcygpIHsKICAgICAgcmV0dXJuIHRoaXMudmlzdWFsaXphdGlvbnNbdGhpcy50eXBlXS5hdmFpbGFibGU7CiAgICB9LAogICAgc3VwcG9ydHNfcGVyaW9kOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ3N1bmJ1cnN0X2Nsb2NrJyB8fCB0aGlzLnR5cGUgPT0gJ3RpbWVsaW5lX2JhcmNoYXJ0JykgewogICAgICAgIHJldHVybiB0aGlzLmlzU2luZ2xlRGF5OwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIHRvcF9jYXRlZ29yaWVzX2hpZXJhcmNoeTogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCB0b3BfY2F0ZWdvcmllcyA9IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmNhdGVnb3J5LnRvcDsKICAgICAgaWYgKHRvcF9jYXRlZ29yaWVzKSB7CiAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IHRvcF9jYXRlZ29yaWVzLm1hcChjID0+IHsKICAgICAgICAgIHJldHVybiB7IG5hbWU6IGMuZGF0YS4kY2F0ZWdvcnksIHNpemU6IGMuZHVyYXRpb24gfTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5hbWU6ICdBbGwnLAogICAgICAgICAgY2hpbGRyZW46IGJ1aWxkX2NhdGVnb3J5X2hpZXJhcmNoeShjYXRlZ29yaWVzKS5tYXAoYyA9PiBwaWNrX3N1Ym5hbWVfYXNfbmFtZShjKSksCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGRhdGFzZXRzOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IE1FVEhPRF9DQVRFR09SWSA9ICdjYXRlZ29yeSc7CiAgICAgIGNvbnN0IE1FVEhPRF9BQ1RJVklUWSA9ICdhY3Rpdml0eSc7CiAgICAgIGNvbnN0IG1ldGhvZCA9IE1FVEhPRF9DQVRFR09SWTsKICAgICAgaWYgKG1ldGhvZCA9PSBNRVRIT0RfQ0FURUdPUlkpIHsKICAgICAgICBjb25zdCBTRVAgPSAnPj4+JzsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkuY2F0ZWdvcnkuYnlfaG91cjsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IG5ldyBTZXQoCiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YSkKICAgICAgICAgICAgICAubWFwKHJlc3VsdCA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNhdF9ldmVudHMubWFwKGUgPT4gZS5kYXRhWyckY2F0ZWdvcnknXS5qb2luKFNFUCkpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmZsYXQoKQogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IGRzID0gWy4uLmNhdGVnb3JpZXNdLm1hcChjXyA9PiB7CiAgICAgICAgICAgIGNvbnN0IGMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjYXRlZ29yaWVzL2dldF9jYXRlZ29yeSddKGNfLnNwbGl0KFNFUCkpOwogICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBsYWJlbDogYy5uYW1lLmpvaW4oJyA+ICcpLAogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnZXRDb2xvckZyb21DYXRlZ29yeShjLCB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVzLmNsYXNzZXMpLAogICAgICAgICAgICAgICAgZGF0YTogT2JqZWN0LnZhbHVlcyhkYXRhKS5tYXAocmVzdWx0cyA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNhdCA9IHJlc3VsdHMuY2F0X2V2ZW50cy5maW5kKGUgPT4gXy5pc0VxdWFsKGUuZGF0YVsnJGNhdGVnb3J5J10sIGMubmFtZSkpOwogICAgICAgICAgICAgICAgICBpZiAoY2F0KSByZXR1cm4gTWF0aC5yb3VuZCgoY2F0LmR1cmF0aW9uIC8gKDYwICogNjApKSAqIDEwMDApIC8gMTAwMDsKICAgICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21pc3NpbmcgYycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBkczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT0gTUVUSE9EX0FDVElWSVRZKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHNwbGl0X2J5X2hvdXJfaW50b19kYXRhKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2aXR5LmFjdGl2ZS5ldmVudHMpOwogICAgICAgIHJldHVybiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIGxhYmVsOiAnVG90YWwgdGltZScsCiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM2Njk5ZmYnLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICB9CiAgICAgIHJldHVybiBbXTsKICAgIH0sCiAgICBkYXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCBkYXRlID0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkucXVlcnlfb3B0aW9ucy5kYXRlOwogICAgICBpZiAoIWRhdGUpIHsKICAgICAgICBkYXRlID0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkucXVlcnlfb3B0aW9ucy50aW1lcGVyaW9kLnN0YXJ0OwogICAgICB9CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIGlzU2luZ2xlRGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfLmlzRXF1YWwodGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZpdHkucXVlcnlfb3B0aW9ucy50aW1lcGVyaW9kLmxlbmd0aCwgWzEsICdkYXknXSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["SelectableVisualization.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelectableVisualization.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"pug\">\ndiv\n  h5\n    icon.handle(name=\"bars\" v-if=\"editable\" style=\"opacity: 0.6; cursor: grab;\")\n    | {{ visualizations[type].title }}\n  div(v-if=\"editable\").vis-style-dropdown-btn\n    b-dropdown.mr-1(size=\"sm\" variant=\"outline-secondary\" right)\n      template(v-slot:button-content)\n        icon(name=\"cog\")\n      b-dropdown-item(v-for=\"t in types\" :key=\"t\" variant=\"outline-secondary\" @click=\"$emit('onTypeChange', id, t)\")\n        | {{ visualizations[t].title }} #[span.small(v-if=\"!visualizations[t].available\" style=\"color: #A50\") (no data)]\n    b-button.p-0(size=\"sm\", variant=\"outline-danger\" @click=\"$emit('onRemove', id)\")\n      icon(name=\"times\")\n\n  div(v-if=\"!supports_period\")\n    b-alert.small.px-2.py-1(show variant=\"warning\")\n      | This feature doesn't support the current time period.\n\n  div(v-if=\"$store.state.activity.buckets.loaded\")\n    // Check data prerequisites\n    div(v-if=\"!has_prerequisites\")\n      b-alert.small.px-2.py-1(show variant=\"warning\")\n        | This feature is missing data from a required watcher.\n        | You can find a list of all watchers in #[a(href=\"https://activitywatch.readthedocs.io/en/latest/watchers.html\") the documentation].\n\n    div(v-if=\"type == 'top_apps'\")\n      aw-summary(:fields=\"$store.state.activity.window.top_apps\",\n                 :namefunc=\"e => e.data.app\",\n                 :colorfunc=\"e => e.data.app\",\n                 with_limit)\n    div(v-if=\"type == 'top_titles'\")\n      aw-summary(:fields=\"$store.state.activity.window.top_titles\",\n                 :namefunc=\"e => e.data.title\",\n                 :colorfunc=\"e => e.data.title\",\n                 with_limit)\n    div(v-if=\"type == 'top_domains'\")\n      aw-summary(:fields=\"$store.state.activity.browser.top_domains\",\n                 :namefunc=\"e => e.data.$domain\",\n                 :colorfunc=\"e => e.data.$domain\",\n                 with_limit)\n    div(v-if=\"type == 'top_urls'\")\n      aw-summary(:fields=\"$store.state.activity.browser.top_urls\",\n                 :namefunc=\"e => e.data.url\",\n                 :colorfunc=\"e => e.data.$domain\",\n                 with_limit)\n    div(v-if=\"type == 'top_editor_files'\")\n      aw-summary(:fields=\"$store.state.activity.editor.top_files\",\n                 :namefunc=\"top_editor_files_namefunc\",\n                 :hoverfunc=\"top_editor_files_hoverfunc\",\n                 :colorfunc=\"e => e.data.language\",\n                 with_limit)\n    div(v-if=\"type == 'top_editor_languages'\")\n      aw-summary(:fields=\"$store.state.activity.editor.top_languages\",\n                 :namefunc=\"e => e.data.language\",\n                 :colorfunc=\"e => e.data.language\",\n                 with_limit)\n    div(v-if=\"type == 'top_editor_projects'\")\n      aw-summary(:fields=\"$store.state.activity.editor.top_projects\",\n                 :namefunc=\"top_editor_projects_namefunc\",\n                 :hoverfunc=\"top_editor_projects_hoverfunc\",\n                 :colorfunc=\"e => e.data.language\",\n                 with_limit)\n    div(v-if=\"type == 'top_categories'\")\n      aw-summary(:fields=\"$store.state.activity.category.top\",\n                 :namefunc=\"e => e.data['$category'].join(' > ')\",\n                 :colorfunc=\"e => e.data['$category'].join(' > ')\",\n                 with_limit)\n    div(v-if=\"type == 'category_tree'\")\n      aw-categorytree(:events=\"$store.state.activity.category.top\")\n    div(v-if=\"type == 'category_sunburst'\")\n      aw-sunburst-categories(:data=\"top_categories_hierarchy\", style=\"height: 20em\")\n    div(v-if=\"type == 'timeline_barchart'\")\n      aw-timeline-barchart(:datasets=\"datasets\", style=\"height: 100\")\n    div(v-if=\"type == 'sunburst_clock'\")\n      aw-sunburst-clock(:date=\"date\", :afkBucketId=\"$store.state.activity.buckets.afk[0]\", :windowBucketId=\"$store.state.activity.buckets.window[0]\")\n</template>\n\n<style lang=\"scss\">\n.vis-style-dropdown-btn {\n  position: absolute;\n  top: 0.8em;\n  right: 0.8em;\n\n  .btn {\n    border: 0px;\n  }\n}\n</style>\n\n<script>\nimport _ from 'lodash';\nimport 'vue-awesome/icons/cog';\nimport 'vue-awesome/icons/times';\nimport 'vue-awesome/icons/bars';\n\nimport { split_by_hour_into_data } from '~/util/transforms';\n\n// TODO: Move this somewhere else\nimport { build_category_hierarchy } from '~/util/classes';\nimport { getColorFromCategory } from '~/util/color';\n\nfunction pick_subname_as_name(c) {\n  c.name = c.subname;\n  c.children = c.children.map(pick_subname_as_name);\n  return c;\n}\n\nexport default {\n  name: 'aw-selectable-vis',\n  props: {\n    id: Number,\n    type: String,\n    editable: { type: Boolean, default: true },\n  },\n  data: function () {\n    return {\n      types: [\n        'top_apps',\n        'top_titles',\n        'top_domains',\n        'top_urls',\n        'top_categories',\n        'category_tree',\n        'category_sunburst',\n        'top_editor_files',\n        'top_editor_languages',\n        'top_editor_projects',\n        'timeline_barchart',\n        'sunburst_clock',\n      ],\n      // TODO: Move this function somewhere else\n      top_editor_files_namefunc: e => {\n        let f = e.data.file || '';\n        f = f.split('/');\n        f = f[f.length - 1];\n        return f;\n      },\n      top_editor_files_hoverfunc: e => {\n        return 'file: ' + e.data.file + '\\n' + 'project: ' + e.data.project;\n      },\n      // TODO: Move this function somewhere else\n      top_editor_projects_namefunc: e => {\n        let f = e.data.project || '';\n        f = f.split('/');\n        f = f[f.length - 1];\n        return f;\n      },\n      top_editor_projects_hoverfunc: e => e.data.project,\n    };\n  },\n  computed: {\n    visualizations: function () {\n      return {\n        top_apps: {\n          title: 'Top Applications',\n          available:\n            this.$store.state.activity.window.available ||\n            this.$store.state.activity.android.available,\n        },\n        top_titles: {\n          title: 'Top Window Titles',\n          available: this.$store.state.activity.window.available,\n        },\n        top_domains: {\n          title: 'Top Browser Domains',\n          available: this.$store.state.activity.browser.available,\n        },\n        top_urls: {\n          title: 'Top Browser URLs',\n          available: this.$store.state.activity.browser.available,\n        },\n        top_editor_files: {\n          title: 'Top Editor Files',\n          available: this.$store.state.activity.editor.available,\n        },\n        top_editor_languages: {\n          title: 'Top Editor Languages',\n          available: this.$store.state.activity.editor.available,\n        },\n        top_editor_projects: {\n          title: 'Top Editor Projects',\n          available: this.$store.state.activity.editor.available,\n        },\n        top_categories: {\n          title: 'Top Categories',\n          available: this.$store.state.activity.category.available,\n        },\n        category_tree: {\n          title: 'Category Tree',\n          available: this.$store.state.activity.category.available,\n        },\n        category_sunburst: {\n          title: 'Category Sunburst',\n          available: this.$store.state.activity.category.available,\n        },\n        timeline_barchart: {\n          title: 'Timeline (barchart)',\n          available: true,\n        },\n        sunburst_clock: {\n          title: 'Sunburst clock',\n          available:\n            this.$store.state.activity.window.available &&\n            this.$store.state.activity.active.available,\n        },\n      };\n    },\n    has_prerequisites() {\n      return this.visualizations[this.type].available;\n    },\n    supports_period: function () {\n      if (this.type == 'sunburst_clock' || this.type == 'timeline_barchart') {\n        return this.isSingleDay;\n      }\n      return true;\n    },\n    top_categories_hierarchy: function () {\n      const top_categories = this.$store.state.activity.category.top;\n      if (top_categories) {\n        const categories = top_categories.map(c => {\n          return { name: c.data.$category, size: c.duration };\n        });\n\n        return {\n          name: 'All',\n          children: build_category_hierarchy(categories).map(c => pick_subname_as_name(c)),\n        };\n      } else {\n        return null;\n      }\n    },\n    datasets: function () {\n      const METHOD_CATEGORY = 'category';\n      const METHOD_ACTIVITY = 'activity';\n      const method = METHOD_CATEGORY;\n      if (method == METHOD_CATEGORY) {\n        const SEP = '>>>';\n        const data = this.$store.state.activity.category.by_hour;\n        if (data) {\n          const categories = new Set(\n            Object.values(data)\n              .map(result => {\n                return result.cat_events.map(e => e.data['$category'].join(SEP));\n              })\n              .flat()\n          );\n          const ds = [...categories].map(c_ => {\n            const c = this.$store.getters['categories/get_category'](c_.split(SEP));\n            if (c) {\n              return {\n                label: c.name.join(' > '),\n                backgroundColor: getColorFromCategory(c, this.$store.state.categories.classes),\n                data: Object.values(data).map(results => {\n                  const cat = results.cat_events.find(e => _.isEqual(e.data['$category'], c.name));\n                  if (cat) return Math.round((cat.duration / (60 * 60)) * 1000) / 1000;\n                  else return null;\n                }),\n              };\n            } else {\n              console.log('missing c');\n            }\n          });\n          return ds;\n        } else {\n          return [];\n        }\n      } else if (method == METHOD_ACTIVITY) {\n        const data = split_by_hour_into_data(this.$store.state.activity.active.events);\n        return [\n          {\n            label: 'Total time',\n            backgroundColor: '#6699ff',\n            data,\n          },\n        ];\n      }\n      return [];\n    },\n    date: function () {\n      let date = this.$store.state.activity.query_options.date;\n      if (!date) {\n        date = this.$store.state.activity.query_options.timeperiod.start;\n      }\n      return date;\n    },\n    isSingleDay: function () {\n      return _.isEqual(this.$store.state.activity.query_options.timeperiod.length, [1, 'day']);\n    },\n  },\n};\n</script>\n"]}]}